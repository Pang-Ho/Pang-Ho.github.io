{"componentChunkName":"component---src-templates-post-jsx","path":"/posts/react/file-upload/multipart/","result":{"data":{"site":{"siteMetadata":{"title":"THE GREAT PANG"}},"markdownRemark":{"id":"101eb83b-5428-5522-ace9-76cd8d4e33b7","excerpt":"ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½ React v18 AWS SDK for Java1.x ë°±ì—”ë“œ : AWS EKS í™˜ê²½ í”„ë¡ íŠ¸ : AWS S3 Nginx í™˜ê²½ ë°°ê²½ ê¸°ë³¸ì ìœ¼ë¡œ ì—…ë¡œë“œ í‰ê·  ì†ë„ëŠ” 5MB/s ë¼ê³ í•œë‹¤. íŒŒì¼ì„ Presigned URLì— í†µì§¸ë¡œ ì˜¬ë¦¬ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œë°œí•´ë‘ê³  50MB íŒŒì¼ì´ ì•½ 10ì´ˆ ì •ë„ ê±¸â€¦","html":"<h1 id=\"ë¦¬ì•¡íŠ¸ì—ì„œ-URL-ì´ë™ì‹œ-ê°ì§€í•˜ì—¬-ì›í•˜ëŠ”-ë¡œì§ì„-ë„£ì–´ë³´ì\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8%EC%97%90%EC%84%9C-URL-%EC%9D%B4%EB%8F%99%EC%8B%9C-%EA%B0%90%EC%A7%80%ED%95%98%EC%97%AC-%EC%9B%90%ED%95%98%EB%8A%94-%EB%A1%9C%EC%A7%81%EC%9D%84-%EB%84%A3%EC%96%B4%EB%B3%B4%EC%9E%90\" aria-label=\"ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì</h1>\n<h2 id=\"-í…ŒìŠ¤íŠ¸-í™˜ê²½\" style=\"position:relative;\"><a href=\"#-%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%99%98%EA%B2%BD\" aria-label=\" í…ŒìŠ¤íŠ¸ í™˜ê²½ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½</h2>\n<blockquote>\n<p>React v18</p>\n<p>AWS SDK for Java1.x</p>\n<p>ë°±ì—”ë“œ : AWS EKS í™˜ê²½</p>\n<p>í”„ë¡ íŠ¸ : AWS S3 Nginx í™˜ê²½</p>\n</blockquote>\n<h2 id=\"ë°°ê²½\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EA%B2%BD\" aria-label=\"ë°°ê²½ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ë°°ê²½</h2>\n<p>ê¸°ë³¸ì ìœ¼ë¡œ ì—…ë¡œë“œ í‰ê·  ì†ë„ëŠ” 5MB/s ë¼ê³ í•œë‹¤.</p>\n<p>íŒŒì¼ì„ Presigned URLì— í†µì§¸ë¡œ ì˜¬ë¦¬ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œë°œí•´ë‘ê³  50MB íŒŒì¼ì´ ì•½ 10ì´ˆ ì •ë„ ê±¸ë ¸ì—ˆë‹¤.</p>\n<p>ë¬¸ì œê°€ ìƒê²¼ë‹¤. ê³ ê°ìª½ ë„¤íŠ¸ì›Œí¬ ë§ì´ ìƒíƒœê°€ ì•ˆì¢‹ì€ì§€ ì—…ë¡œë“œ ì†ë„ê°€ ì‹¬ê°í•˜ê²Œ ëŠë ¤ì¡Œë‹¤.</p>\n<p>ë„¤íŠ¸ì›Œí¬ ìª½ì—ì„œ ì²˜ë¦¬ë¥¼ í•´ì£¼ê² ì§€ë§Œ, ìš°ì„ ì ìœ¼ë¡œ ì‹œìŠ¤í…œ ë‚´ë¶€ì—ì„œ ê°œì„ í•  ë‚´ìš©ì„ ì°¾ì•„ë³´ì.</p>\n<h2 id=\"ëª©í‘œ\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%ED%91%9C\" aria-label=\"ëª©í‘œ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ëª©í‘œ</h2>\n<ol>\n<li>Presigned URL ì†ë„ ì²´í¬</li>\n<li>4ê°€ì§€ ë°©ë²• êµ¬í˜„ í›„ ì†ë„ ë¹„êµ\n<ol>\n<li>Presigned URLì„ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ</li>\n<li>Presigned URLì„ ì´ìš©í•œ Multipart File ì—…ë¡œë“œ</li>\n<li>ì„œë²„ì— íŒŒì¼ ì—…ë¡œë“œ í•˜ì—¬ S3ì— ì—…ë¡œë“œ</li>\n<li>ì„œë²„ì— Multipart Fileì„ ì—…ë¡œë“œí•˜ì—¬ S3ì— ì—…ë¡œë“œ</li>\n</ol>\n</li>\n<li>ë„¤íŠ¸ì›Œí¬ ê°œì„  í›„ íŒŒì¼ ì—…ë¡œë“œ ì†ë„ ë¹„êµ</li>\n</ol>\n<h2 id=\"êµ¬í˜„\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"êµ¬í˜„ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>êµ¬í˜„</h2>\n<h3 id=\"êµ¬í˜„í•˜ê¸°-ì•ì„œ-ì—…ë¡œë“œ-ì†ë„-ì²´í¬\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-%EC%95%9E%EC%84%9C-%EC%97%85%EB%A1%9C%EB%93%9C-%EC%86%8D%EB%8F%84-%EC%B2%B4%ED%81%AC\" aria-label=\"êµ¬í˜„í•˜ê¸° ì•ì„œ ì—…ë¡œë“œ ì†ë„ ì²´í¬ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>êµ¬í˜„í•˜ê¸° ì•ì„œ ì—…ë¡œë“œ ì†ë„ ì²´í¬</h3>\n<ul>\n<li>ë¸Œë¼ìš°ì €ì—ì„œ S3 ì§ì ‘ íŒŒì¼ ì „ì†¡\n<ul>\n<li>ê¸°ì¡´ 50MB / 10ì´ˆ => ë„¤íŠ¸ì›Œí¬ ë§ ìƒíƒœê°€ ì•ˆì¢‹ì•„ì§„ ìƒí™© : 50MB / 14ë¶„</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-Presigned-URL-multipart-íŒŒì¼-ì—…ë¡œë“œ\" style=\"position:relative;\"><a href=\"#1-Presigned-URL-multipart-%ED%8C%8C%EC%9D%BC-%EC%97%85%EB%A1%9C%EB%93%9C\" aria-label=\"1 Presigned URL multipart íŒŒì¼ ì—…ë¡œë“œ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1. Presigned URL multipart íŒŒì¼ ì—…ë¡œë“œ</h3>\n<h4 id=\"React\" style=\"position:relative;\"><a href=\"#React\" aria-label=\"React permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>React</h4>\n<p>ë™ì‘ ë°©ì‹</p>\n<ol>\n<li>í”„ë¡ íŠ¸ì—ì„œ ì˜¬ë¦´ íŒŒì¼ì„ ìë¥¸ë‹¤.(Multipartë¡œ íŒŒì¼ì„ ìë¥¸ë‹¤.)</li>\n<li>í”„ë¡ íŠ¸ì—ì„œ ì˜¬ë¦´ íŒŒì¼ ì •ë³´ë¥¼ ë°±ì—”ë“œë¡œ ì†¡ì‹ í•˜ì—¬ ë°±ì—”ë“œì—ì„œ Presigned URLì„ ë°›ì•„ì˜¨ë‹¤.\n<ul>\n<li>í”„ë¡ íŠ¸ì—ì„œ S3ë¡œë¶€í„° Presigned URLì„ ë°›ì§€ ì•Šê³  ë°±ì—”ë“œì—ì„œ ë°›ë„ë¡ í•˜ì˜€ë‹¤.</li>\n</ul>\n</li>\n<li>Multipart Fileì„ Presigned URLì„ ì´ìš©í•´ S3ì— ì—…ë¡œë“œí•œë‹¤.</li>\n<li>Multipart Fileì´ ëª¨ë‘ ì—…ë¡œë“œë˜ë©´, S3ì—ì„œ í•©ì¹  ìˆ˜ ìˆë„ë¡ ë°±ì—”ë“œì— ìš”ì²­í•œë‹¤.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Multipart Fileë¡œ íŒŒì¼ ì—…ë¡œë“œ ë¡œì§</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> FileUploader <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>files<span class=\"token punctuation\">,</span> setFiles<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span>File<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      <span class=\"token function-variable function\">saveFiles</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> onSaveFiles<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSaveFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">// 1. presigned Url multipart íŒŒì¼ ì—…ë¡œë“œ</span>\r\n      <span class=\"token keyword\">await</span> <span class=\"token function\">processUploadMultipartFilesWithPresignedUrl</span><span class=\"token punctuation\">(</span>files<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token operator\">...</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// 1. presigned Urlë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ë¡œì§</span>\r\n    <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">processUploadMultipartFilesWithPresignedUrl</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">// íŒŒì¼ì„ ì–¼ë§ˆ ë‹¨ìœ„ë¡œ ìë¥¼ì§€ ì„¤ì •í•œë‹¤. AWS S3ì—ì„œëŠ” 5MBë¥¼ ìµœì†Œ í¬ê¸°ë¡œ ì¡ëŠ”ë‹¤.</span>\r\n      <span class=\"token keyword\">const</span> chunkSize <span class=\"token operator\">=</span> <span class=\"token number\">10</span> <span class=\"token operator\">*</span> <span class=\"token number\">1024</span> <span class=\"token operator\">*</span> <span class=\"token number\">1024</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> partCount <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size <span class=\"token operator\">/</span> chunkSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">const</span> uploadPromises <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\r\n          <span class=\"token function\">processUploadMultipartFileWithPresignedUrl</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">,</span> chunkSize<span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> file<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token string\">'fulfilled'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> file<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token string\">'rejected'</span><span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">const</span> results <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">allSettled</span><span class=\"token punctuation\">(</span>uploadPromises<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">successFiles</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">failedFiles</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n      results<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result<span class=\"token punctuation\">,</span> idx</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> status<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">,</span> reason <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> result<span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>status <span class=\"token operator\">===</span> <span class=\"token string\">'fulfilled'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\r\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token string\">'fulfilled'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            successFiles<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>res<span class=\"token punctuation\">.</span>file<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> ì—…ë¡œë“œ ì‹¤íŒ¨</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            failedFiles<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\r\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>files<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> ì—…ë¡œë“œ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì‹¤íŒ¨</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> reason<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n          failedFiles<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>files<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token string\">'âœ… ì„±ê³µí•œ íŒŒì¼:'</span><span class=\"token punctuation\">,</span>\r\n        successFiles<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">f</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> f<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token string\">'âŒ ì‹¤íŒ¨í•œ íŒŒì¼:'</span><span class=\"token punctuation\">,</span>\r\n        failedFiles<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">f</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> f<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\r\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">...</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">processUploadMultipartFileWithPresignedUrl</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>\r\n      <span class=\"token parameter\"><span class=\"token literal-property property\">file</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">chunkSize</span><span class=\"token operator\">:</span> number</span>\r\n    <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> partCount <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size <span class=\"token operator\">/</span> chunkSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// 1. í”„ë¡ íŠ¸ì—ì„œ ì˜¬ë¦´ íŒŒì¼ ì •ë³´ë¥¼ ë°±ì—”ë“œë¡œ ì†¡ì‹ í•˜ì—¬ ë°±ì—”ë“œì—ì„œ Presigned URLì„ ë°›ì•„ì˜¨ë‹¤.</span>\r\n        <span class=\"token keyword\">const</span> FileUploadStartResponse <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/upload/presigned-url/start\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">fileSize</span><span class=\"token operator\">:</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">fileName</span><span class=\"token operator\">:</span> file<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">fileType</span><span class=\"token operator\">:</span> file<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">,</span>\r\n            <span class=\"token literal-property property\">partCount</span><span class=\"token operator\">:</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>partCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> uploadId<span class=\"token punctuation\">,</span> preSignedUrlList<span class=\"token punctuation\">,</span> key <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> FileUploadStartResponse<span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// const parts: { partNumber: number; eTag: string }[] = [];</span>\r\n\r\n        <span class=\"token comment\">// 2. ìë¥¸ íŒŒì¼(Multipart File)ì„ Presigned URLì— ì˜¬ë¦°ë‹¤.</span>\r\n        <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">uploadPart</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">i</span><span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token keyword\">const</span> start <span class=\"token operator\">=</span> i <span class=\"token operator\">*</span> chunkSize<span class=\"token punctuation\">;</span>\r\n          <span class=\"token keyword\">const</span> end <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">,</span> start <span class=\"token operator\">+</span> chunkSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n          <span class=\"token keyword\">const</span> blob <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>start<span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n          <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>preSignedUrlList<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> blob<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n              <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> file<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n          <span class=\"token comment\">/*\r\n              2-1. íŒŒíŠ¸ ì—…ë¡œë“œì‹œ S3ì—ì„œ Response Headerì— eTag ê°’ì„ ë³´ë‚´ì£¼ëŠ”ë°, ê°€ì§€ê³  ìˆì–´ì•¼í•œë‹¤.\r\n              ì´ ê°’ì„ ì œëŒ€ë¡œ ë°›ìœ¼ë ¤ë©´, s3 header cors ì„¤ì •ì´ í•„ìš”í•˜ë‹¤.\r\n           */</span>\r\n          <span class=\"token keyword\">const</span> eTag <span class=\"token operator\">=</span> res<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">.</span>etag <span class=\"token operator\">||</span> res<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">.</span>ETag <span class=\"token operator\">||</span> res<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">.</span>Etag<span class=\"token punctuation\">;</span>\r\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">partNumber</span><span class=\"token operator\">:</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">eTag</span><span class=\"token operator\">:</span> eTag<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\"</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// 3. ë³‘ë ¬ ì—…ë¡œë“œ</span>\r\n        <span class=\"token keyword\">const</span> uploadPromises <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">length</span><span class=\"token operator\">:</span> partCount <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">uploadPart</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> parts <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>uploadPromises<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// 4. ì™„ë£Œìš”ì²­(ì™„ë£Œ ìš”ì²­ì„ í•´ì•¼ partë¡œ ì˜¬ë¼ê°„ íŒŒì¼ë“¤ì„ S3ë‚´ì—ì„œ í•©ì³ì¤€ë‹¤)</span>\r\n        <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/upload/presigned-url/complete\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token literal-property property\">uploadId</span><span class=\"token operator\">:</span> uploadId<span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> key<span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">parts</span><span class=\"token operator\">:</span> parts<span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>file<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> ì—…ë¡œë“œ ì‹¤íŒ¨</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4 id=\"SpringBoot\" style=\"position:relative;\"><a href=\"#SpringBoot\" aria-label=\"SpringBoot permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>SpringBoot</h4>\n<p>ë™ì‘ë°©ì‹</p>\n<ol>\n<li>/api/upload/presigned-url/start ì—ì„œëŠ” íŒŒì¼ ì •ë³´ë¥¼ ë°›ì•„ Presigned URLì„ ë§Œë“¤ì–´ ë³´ë‚´ì¤€ë‹¤.</li>\n<li>/api/upload/presigned-url/complete ì—ì„œëŠ” Multipart Fileì„ S3ì—ì„œ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ í•©ì³ì§€ë„ë¡ S3 ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">  <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/api/upload/presigned-url/start\"</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FileUploadStartResponse</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">startMultipartUpload</span><span class=\"token punctuation\">(</span>\r\n          <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fileName\"</span><span class=\"token punctuation\">)</span> <span class=\"token annotation punctuation\">@NotBlank</span> <span class=\"token class-name\">String</span> fileName\r\n          <span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fileSize\"</span><span class=\"token punctuation\">)</span> <span class=\"token annotation punctuation\">@NotBlank</span> <span class=\"token class-name\">String</span> fileSize\r\n          <span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fileType\"</span><span class=\"token punctuation\">)</span> <span class=\"token annotation punctuation\">@NotBlank</span> <span class=\"token class-name\">String</span> fileType\r\n          <span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"partCount\"</span><span class=\"token punctuation\">)</span> <span class=\"token annotation punctuation\">@NotBlank</span> <span class=\"token keyword\">int</span> partCount\r\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">// AWS SDK</span>\r\n      <span class=\"token class-name\">AmazonS3</span> s3Client <span class=\"token operator\">=</span> <span class=\"token class-name\">AmazonS3ClientBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">standard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">withRegion</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Regions</span><span class=\"token punctuation\">.</span><span class=\"token constant\">AP_NORTHEAST_2</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token comment\">// S3ì— ì €ì¥ë  í‚¤ ê°’(S3 ë‚´ì—ì„œëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë´ë„ ëœë‹¤.)</span>\r\n      <span class=\"token class-name\">String</span> key <span class=\"token operator\">=</span> <span class=\"token string\">\"upload/\"</span> <span class=\"token operator\">+</span> <span class=\"token constant\">UUID</span><span class=\"token punctuation\">.</span><span class=\"token function\">randomUUID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"_\"</span> <span class=\"token operator\">+</span> fileName<span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token class-name\">ObjectMetadata</span> metadata <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectMetadata</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      metadata<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span>fileType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token class-name\">String</span> uploadId <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> preSignedUrls <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">InitiateMultipartUploadRequest</span> initRequest <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InitiateMultipartUploadRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>s3 bucket ì£¼ì†Œ<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">withObjectMetadata</span><span class=\"token punctuation\">(</span>metadata<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        uploadId <span class=\"token operator\">=</span> s3Client<span class=\"token punctuation\">.</span><span class=\"token function\">initiateMultipartUpload</span><span class=\"token punctuation\">(</span>initRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getUploadId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Pre-Signed URL ë§Œë£Œ ì‹œê°„ (60ë¶„ í›„)</span>\r\n        <span class=\"token class-name\">Date</span> expiration <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">long</span> expTimeMillis <span class=\"token operator\">=</span> expiration<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// 10ë¶„ í›„ ë§Œë£Œ</span>\r\n        expTimeMillis <span class=\"token operator\">+=</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MINUTES</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMillis</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        expiration<span class=\"token punctuation\">.</span><span class=\"token function\">setTime</span><span class=\"token punctuation\">(</span>expTimeMillis<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// ê° partì— ëŒ€í•œ Pre-Signed URL ìƒì„±</span>\r\n\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> partCount<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token class-name\">GeneratePresignedUrlRequest</span> generatePresignedUrlRequest <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GeneratePresignedUrlRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>s3 bucket ì£¼ì†Œ<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">withMethod</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">PUT</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">withExpiration</span><span class=\"token punctuation\">(</span>expiration<span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">withContentType</span><span class=\"token punctuation\">(</span>fileType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            generatePresignedUrlRequest<span class=\"token punctuation\">.</span><span class=\"token function\">addRequestParameter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"partNumber\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            generatePresignedUrlRequest<span class=\"token punctuation\">.</span><span class=\"token function\">addRequestParameter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"uploadId\"</span><span class=\"token punctuation\">,</span> uploadId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n            <span class=\"token class-name\">URL</span> url <span class=\"token operator\">=</span> s3Client<span class=\"token punctuation\">.</span><span class=\"token function\">generatePresignedUrl</span><span class=\"token punctuation\">(</span>generatePresignedUrlRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            preSignedUrls<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Presigned URL failed for file: \"</span> <span class=\"token operator\">+</span> fileName <span class=\"token operator\">+</span> <span class=\"token string\">\". Error: \"</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FileUploadStartResponse</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">uploadId</span><span class=\"token punctuation\">(</span>uploadId<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">preSignedUrlList</span><span class=\"token punctuation\">(</span>preSignedUrls<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">key</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n\r\n  <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/api/upload/presigned-url/complete\"</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">completeMultipartUpload</span><span class=\"token punctuation\">(</span>\r\n          <span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">FileUploadCompleteRequest</span> fileUploadCompleteRequest\r\n          <span class=\"token comment\">//uploadId, key, parts ì„¸ê°œë¥¼ ë°›ê³ ìˆê³ , partsëŠ” partNumberì™€ eTagë¥¼ ë°›ê³ ìˆìŠµë‹ˆë‹¤.</span>\r\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">// AWS SDK</span>\r\n      <span class=\"token class-name\">AmazonS3</span> s3Client <span class=\"token operator\">=</span> s3Service<span class=\"token punctuation\">.</span><span class=\"token function\">getS3Client</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PartETag</span><span class=\"token punctuation\">></span></span> partETags <span class=\"token operator\">=</span> fileUploadCompleteRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getParts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n              <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">-></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PartETag</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">getPartNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span><span class=\"token function\">getETag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n              <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token class-name\">CompleteMultipartUploadRequest</span> completeRequest <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CompleteMultipartUploadRequest</span><span class=\"token punctuation\">(</span>\r\n          <span class=\"token punctuation\">[</span>s3 bucket ì£¼ì†Œ<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n                fileUploadCompleteRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                fileUploadCompleteRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getUploadId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                partETags\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        s3Client<span class=\"token punctuation\">.</span><span class=\"token function\">completeMultipartUpload</span><span class=\"token punctuation\">(</span>completeRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span>  <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Compleye failed\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì™„ë£Œ\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token annotation punctuation\">@Data</span>\r\n  <span class=\"token annotation punctuation\">@Builder</span>\r\n  <span class=\"token annotation punctuation\">@NoArgsConstructor</span>\r\n  <span class=\"token annotation punctuation\">@AllArgsConstructor</span>\r\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FileUploadCompleteRequest</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token annotation punctuation\">@Schema</span><span class=\"token punctuation\">(</span>description <span class=\"token operator\">=</span> <span class=\"token string\">\"uploadId\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"uploadId\"</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> uploadId<span class=\"token punctuation\">;</span>\r\n\r\n          <span class=\"token annotation punctuation\">@Schema</span><span class=\"token punctuation\">(</span>description <span class=\"token operator\">=</span> <span class=\"token string\">\"fileSavePath\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"fileSavePath\"</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> fileSavePath<span class=\"token punctuation\">;</span>\r\n\r\n          <span class=\"token annotation punctuation\">@Schema</span><span class=\"token punctuation\">(</span>description <span class=\"token operator\">=</span> <span class=\"token string\">\"parts\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"parts\"</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UploadedPart</span><span class=\"token punctuation\">></span></span> parts<span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token annotation punctuation\">@Data</span>\r\n  <span class=\"token annotation punctuation\">@Builder</span>\r\n  <span class=\"token annotation punctuation\">@NoArgsConstructor</span>\r\n  <span class=\"token annotation punctuation\">@AllArgsConstructor</span>\r\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UploadedPart</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token annotation punctuation\">@NotBlank</span>\r\n          <span class=\"token annotation punctuation\">@Schema</span><span class=\"token punctuation\">(</span>description <span class=\"token operator\">=</span> <span class=\"token string\">\"partNumber\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"partNumber\"</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> partNumber<span class=\"token punctuation\">;</span>\r\n\r\n          <span class=\"token annotation punctuation\">@JsonProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"eTag\"</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token annotation punctuation\">@Schema</span><span class=\"token punctuation\">(</span>description <span class=\"token operator\">=</span> <span class=\"token string\">\"eTag\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"eTag\"</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> eTag<span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>ì§ˆë¬¸</p>\n<p>Q1. Presigned URLì—ì„œ ì‚¬ìš©í•˜ëŠ” APIê°€ ì™œ ë‘ ê°œ ì¸ê°€ìš”?</p>\n<p>A1. '/api/upload/presigned-url/start' start apiì—ì„œëŠ” presigned-urlì„ í”„ë¡ íŠ¸ë¡œ ë³´ë‚´ëŠ” ì—­í• ì„ í•˜ê³ , '/api/upload/presigned-url/complete' complete apiì—ì„œëŠ” presigned urlì— ì˜¬ë¦° multipart íŒŒì¼ì´ ëª¨ë‘ ì˜¬ë¼ê°„ ê²½ìš° í•˜ë‚˜ì˜ íŒŒì¼ë¡œ í•©ì¹˜ëŠ” ê³¼ì •ì„ ì§„í–‰í•©ë‹ˆë‹¤.</p>\n<p>Q2. uploadId, partNumber, etag ì–˜ë„¤ë“¤ì€ ë­ì£ ??</p>\n<p>A2. uploadIdëŠ” S3ì— ì˜¬ë¦° íŒŒì¼ ì •ë³´ì˜ ê³ ìœ  ë²ˆí˜¸, partNumberëŠ” S3ì— ì˜¬ë¦° Multipart Fileì˜ ì¸ë±ìŠ¤ë²ˆí˜¸, eTagëŠ” S3ì—ì„œ ë³´ë‚´ì¤€ Multipart Fileì˜ ê³ ìœ  ë²ˆí˜¸ì…ë‹ˆë‹¤.</p>\n<p>Q3. í”„ë¡ íŠ¸ì—ì„œ eTagê°€ undefined ì˜¤ë¥˜ê°€ ë– ìš”!!!</p>\n<p>A3. multipart fileì„ ì—…ë¡œë“œì‹œ S3ìª½ì—ì„œ response headerì— eTagê°’ì„ ì¤ë‹ˆë‹¤.\r\nì´ ê²½ìš° ì œëŒ€ë¡œ ë°›ìœ¼ë ¤ë©´ S3 CORS ì„¤ì •ì„ í•´ì•¼í•©ë‹ˆë‹¤. AWS ì›¹ ì½˜ì†”ì— ë“¤ì–´ê°€ì„œ ê¶Œí•œ íƒ­ì„ ë“¤ì–´ê°€ CORSë¥¼ ìˆ˜ì •í•˜ëŠ” ë¶€ë¶„ì´ ìˆëŠ”ë°, ê¸°ë³¸ì ìœ¼ë¡œ \"AllowedHeaders\": [ \"*\" ], .... ë“±ì´ ë“¤ì–´ê°€ ìˆì„ê±°ì˜ˆìš”. ì´ê³³ì—ì„œ í¸ì§‘ì„ ì´ìš©í•´ \"ExposeHeaders\": [\"ETag\"] ë‚´ìš©ì„ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.</p>\n<p>Q4. ë°±ì—”ë“œ UploadedPart DTOì•ˆì— eTag ìœ„ì— ìˆëŠ” JsonProperty ì–´ë…¸í…Œì´ì…˜ì€ ë¬´ì—‡ì¸ê°€ìš”?</p>\n<p>A4. ìë°” ë¹ˆ ê·œì¹™ìœ¼ë¡œ ì¸í•´, ë‘ ë²ˆ ì§¸ ê¸€ìê°€ ëŒ€ë¬¸ìë¡œ ì˜¤ëŠ” ê²½ìš° ì œëŒ€ë¡œ ì¸ì‹í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ etagë¡œ ë°ì´í„°ê°€ ë“¤ì–´ì˜¨ê²ƒìœ¼ë¡œ íŒë‹¨í•´, í”„ë¡ íŠ¸ì—ì„œ eTagë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¸ë‹¤í•´ë„, ì„œë²„ì—ì„œëŠ” ì¸ì‹í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ eTagë¼ëŠ” 'ì´ë¦„ì˜ ë°ì´í„°ë‹¤!' ë¼ê³  í‘œí˜„í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì…ë‹ˆë‹¤.</p>\n</blockquote>\n<h3 id=\"2-ì„œë²„ì—-ìŠ¤íŠ¸ë¦¬ë°-ë°©ì‹ìœ¼ë¡œ-multipartFile-ì˜¬ë¦¬ëŠ”-ë¡œì§\" style=\"position:relative;\"><a href=\"#2-%EC%84%9C%EB%B2%84%EC%97%90-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-%EB%B0%A9%EC%8B%9D%EC%9C%BC%EB%A1%9C-multipartFile-%EC%98%AC%EB%A6%AC%EB%8A%94-%EB%A1%9C%EC%A7%81\" aria-label=\"2 ì„œë²„ì— ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ multipartFile ì˜¬ë¦¬ëŠ” ë¡œì§ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>2. ì„œë²„ì— ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ multipartFile ì˜¬ë¦¬ëŠ” ë¡œì§</h3>\n<h4 id=\"React-1\" style=\"position:relative;\"><a href=\"#React-1\" aria-label=\"React 1 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>React</h4>\n<p>ë™ì‘ë°©ì‹</p>\n<ol>\n<li>í”„ë¡ íŠ¸ì—ì„œ íŒŒì¼ ì •ë³´ë¥¼ ë³´ë‚´ ë°±ì—”ë“œì—ì„œ Upload Idë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤.</li>\n<li>í”„ë¡ íŠ¸ì—ì„œ íŒŒì¼ì„ ì˜ë¼ Multipart Fileì„ ë°±ì—”ë“œì— ìŠ¤íŠ¸ë¦¬ë° í˜•íƒœë¡œ ì˜¬ë¦½ë‹ˆë‹¤.</li>\n<li>ë°±ì—”ë“œì—ì„œ ë°›ì€ Multipart Fileì„ S3ì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.</li>\n<li>S3ì— ë‹¤ ì˜¬ë¼ê°€ë©´, Multipart Fileì„ í•©ì¹  ìˆ˜ ìˆë„ë¡ í”„ë¡ íŠ¸ì—ì„œ ë°±ì—”ë“œë¡œ ìš”ì²­í•©ë‹ˆë‹¤.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> FileUploader <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>files<span class=\"token punctuation\">,</span> setFiles<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span>File<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      <span class=\"token function-variable function\">saveFiles</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> onSaveFiles<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSaveFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">// 2. ì„œë²„ì— ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ multipartFile ì˜¬ë¦¬ëŠ” ë¡œì§</span>\r\n\r\n      <span class=\"token comment\">// ê° partë§ˆë‹¤ í¬ê¸° ì„¤ì • AWS S3ëŠ” ìµœì†Œ 5MB</span>\r\n      <span class=\"token keyword\">const</span> chunkSize <span class=\"token operator\">=</span> <span class=\"token number\">10</span> <span class=\"token operator\">*</span> <span class=\"token number\">1024</span> <span class=\"token operator\">*</span> <span class=\"token number\">1024</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> file <span class=\"token keyword\">of</span> files<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">await</span> <span class=\"token function\">processUploadMultipartFileWithStreaming</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">,</span> chunkSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token operator\">...</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// 2. ì„œë²„ì— ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ multipartFile ì˜¬ë¦¬ëŠ” ë¡œì§</span>\r\n    <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">processUploadMultipartFileWithStreaming</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">file</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">chunkSize</span><span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">// ê° partë§ˆë‹¤ í¬ê¸° ì„¤ì • AWS S3ëŠ” ìµœì†Œ 5MB</span>\r\n      <span class=\"token keyword\">const</span> partCount <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size <span class=\"token operator\">/</span> chunkSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">let</span> uploadedSize <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token comment\">// 1. ì„œë²„ì— uploadId ìš”ì²­</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> uploadId<span class=\"token punctuation\">,</span> key <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/upload/server/start\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token literal-property property\">fileName</span><span class=\"token operator\">:</span> file<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">fileType</span><span class=\"token operator\">:</span> file<span class=\"token punctuation\">.</span>type\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">uploadedParts</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">partNumber</span><span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span> eTag<span class=\"token operator\">:</span> string <span class=\"token punctuation\">}</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token comment\">// chunk íŒŒì¼ ì—…ë¡œë“œ ë¡œì§</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">uploadChunk</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">i</span><span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> start <span class=\"token operator\">=</span> i <span class=\"token operator\">*</span> chunkSize<span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> end <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">,</span> start <span class=\"token operator\">+</span> chunkSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> chunk <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>start<span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> formData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        formData<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'uploadId'</span><span class=\"token punctuation\">,</span> uploadId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        formData<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'key'</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        formData<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'chunk'</span><span class=\"token punctuation\">,</span> blob<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        formData<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'partNumber'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/upload/server/start\"</span><span class=\"token punctuation\">,</span> formData<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token string-property property\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"multipart/form-data\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ìƒëµí•´ë„ ë¸Œë¼ìš°ì €ê°€ ì•Œì•„ì„œ ë„£ìŒ</span>\r\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        uploadedParts<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> res<span class=\"token punctuation\">;</span> <span class=\"token comment\">// partNumber, eTag</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">await</span> <span class=\"token function\">asyncPool</span><span class=\"token punctuation\">(</span>\r\n        <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\r\n        Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">length</span><span class=\"token operator\">:</span> partCount <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n        uploadChunk\r\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token comment\">// 4. ì™„ë£Œìš”ì²­</span>\r\n      <span class=\"token keyword\">await</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/upload/server/complete\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token literal-property property\">uploadId</span><span class=\"token operator\">:</span> uploadId<span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> key<span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">parts</span><span class=\"token operator\">:</span> uploadedParts<span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">fileSize</span><span class=\"token operator\">:</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// ë¸Œë¼ìš°ì €ì—ì„œ ìš”ì²­í•˜ëŠ” api í˜¸ì¶œ ê°œìˆ˜ ì¡°ì ˆ</span>\r\n    <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> asyncPool<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">R</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\r\n      <span class=\"token literal-property property\">poolLimit</span><span class=\"token operator\">:</span> number<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">array</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token function-variable function\">iteratorFn</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">item</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Promise<span class=\"token operator\">&lt;</span><span class=\"token constant\">R</span><span class=\"token operator\">></span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span><span class=\"token constant\">R</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">ret</span><span class=\"token operator\">:</span> <span class=\"token constant\">R</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">executing</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span>any<span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> array<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> array<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">const</span> p <span class=\"token operator\">=</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">iteratorFn</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        ret<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>p <span class=\"token keyword\">as</span> any<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ê²°ê³¼ ë°°ì—´ì— ì¶”ê°€</span>\r\n\r\n        <span class=\"token comment\">// poolLimit ì´í•˜ë¡œë§Œ ì‹¤í–‰</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>poolLimit <span class=\"token operator\">&lt;=</span> array<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">e</span><span class=\"token operator\">:</span> Promise<span class=\"token operator\">&lt;</span>any<span class=\"token operator\">></span> <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> executing<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>executing<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n          executing<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>executing<span class=\"token punctuation\">.</span>length <span class=\"token operator\">>=</span> poolLimit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">await</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">race</span><span class=\"token punctuation\">(</span>executing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ì œì¼ ë¨¼ì € ëë‚œ ì‘ì—… ê¸°ë‹¤ë¦¼</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>ret<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ì „ì²´ ì™„ë£Œ ëŒ€ê¸°</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">...</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n\r\n</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\r\n  <span class=\"token comment\">//Upload Id ìš”ì²­ API</span>\r\n  <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/api/upload/server/start\"</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FileUploadStartResponse</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">startMultipartUploadWithStreaming</span><span class=\"token punctuation\">(</span>\r\n          <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fileName\"</span><span class=\"token punctuation\">)</span> <span class=\"token annotation punctuation\">@NotBlank</span> <span class=\"token class-name\">String</span> fileName\r\n          <span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fileType\"</span><span class=\"token punctuation\">)</span> <span class=\"token annotation punctuation\">@NotBlank</span> <span class=\"token class-name\">String</span> fileType\r\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">// AWS SDK</span>\r\n      <span class=\"token class-name\">AmazonS3</span> s3Client <span class=\"token operator\">=</span> <span class=\"token class-name\">AmazonS3ClientBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">standard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">withRegion</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Regions</span><span class=\"token punctuation\">.</span><span class=\"token constant\">AP_NORTHEAST_2</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token comment\">// S3ì— ì €ì¥ë  í‚¤ ê°’(S3 ë‚´ì—ì„œëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë´ë„ ëœë‹¤.)</span>\r\n      <span class=\"token class-name\">String</span> key <span class=\"token operator\">=</span> <span class=\"token string\">\"upload/\"</span> <span class=\"token operator\">+</span> <span class=\"token constant\">UUID</span><span class=\"token punctuation\">.</span><span class=\"token function\">randomUUID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"_\"</span> <span class=\"token operator\">+</span> fileName<span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token class-name\">ObjectMetadata</span> metadata <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectMetadata</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      metadata<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span>fileType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token class-name\">String</span> uploadId <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">InitiateMultipartUploadRequest</span> initRequest <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InitiateMultipartUploadRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>s3 bucket ì£¼ì†Œ<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">withObjectMetadata</span><span class=\"token punctuation\">(</span>metadata<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        uploadId <span class=\"token operator\">=</span> s3Client<span class=\"token punctuation\">.</span><span class=\"token function\">initiateMultipartUpload</span><span class=\"token punctuation\">(</span>initRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getUploadId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Presigned URL failed for file: \"</span> <span class=\"token operator\">+</span> fileName <span class=\"token operator\">+</span> <span class=\"token string\">\". Error: \"</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FileUploadStartResponse</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">uploadId</span><span class=\"token punctuation\">(</span>uploadId<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">key</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token annotation punctuation\">@Data</span>\r\n  <span class=\"token annotation punctuation\">@Builder</span>\r\n  <span class=\"token annotation punctuation\">@NoArgsConstructor</span>\r\n  <span class=\"token annotation punctuation\">@AllArgsConstructor</span>\r\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UploadedPart</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token annotation punctuation\">@NotBlank</span>\r\n          <span class=\"token annotation punctuation\">@Schema</span><span class=\"token punctuation\">(</span>description <span class=\"token operator\">=</span> <span class=\"token string\">\"partNumber\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"partNumber\"</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> partNumber<span class=\"token punctuation\">;</span>\r\n\r\n          <span class=\"token annotation punctuation\">@JsonProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"eTag\"</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> eTag<span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token comment\">// Multipart File ì—…ë¡œë“œ API</span>\r\n  <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/api/upload/server/start\"</span><span class=\"token punctuation\">,</span> produces <span class=\"token operator\">=</span> <span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">APPLICATION_JSON_VALUE</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UploadedPart</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">uploadMultipartFilesWithStreaming</span><span class=\"token punctuation\">(</span>\r\n            <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"chunk\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">MultipartFile</span> chunk<span class=\"token punctuation\">,</span>\r\n            <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"key\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> key<span class=\"token punctuation\">,</span>\r\n            <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"uploadId\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> uploadId<span class=\"token punctuation\">,</span>\r\n            <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"partNumber\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">int</span> partNumber\r\n    <span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\r\n\r\n        <span class=\"token comment\">// AWS SDK</span>\r\n        <span class=\"token class-name\">AmazonS3</span> s3Client <span class=\"token operator\">=</span> <span class=\"token class-name\">AmazonS3ClientBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">standard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                      <span class=\"token punctuation\">.</span><span class=\"token function\">withRegion</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Regions</span><span class=\"token punctuation\">.</span><span class=\"token constant\">AP_NORTHEAST_2</span><span class=\"token punctuation\">)</span>\r\n                      <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">ObjectMetadata</span> metadata <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectMetadata</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        metadata<span class=\"token punctuation\">.</span><span class=\"token function\">setContentLength</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">getSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        metadata<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">getContentType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token class-name\">UploadPartRequest</span> partRequest <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UploadPartRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">withBucketName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>s3 bucket ì£¼ì†Œ<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">withKey</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">withUploadId</span><span class=\"token punctuation\">(</span>uploadId<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">withPartNumber</span><span class=\"token punctuation\">(</span>partNumber<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">withInputStream</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">getInputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">withPartSize</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">getSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token class-name\">UploadPartResult</span> partResult <span class=\"token operator\">=</span> s3Client<span class=\"token punctuation\">.</span><span class=\"token function\">uploadPart</span><span class=\"token punctuation\">(</span>partRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UploadedPart</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">eTag</span><span class=\"token punctuation\">(</span>partResult<span class=\"token punctuation\">.</span><span class=\"token function\">getETag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">partNumber</span><span class=\"token punctuation\">(</span>partNumber<span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token comment\">// Multipart Fileì„ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ í•©ì¹˜ëŠ” API</span>\r\n  <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/api/upload/server/complete\"</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">completeMultipartUpload</span><span class=\"token punctuation\">(</span>\r\n          <span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">FileUploadCompleteRequest</span> fileUploadCompleteRequest\r\n          <span class=\"token comment\">//uploadId, key, parts ì„¸ê°œë¥¼ ë°›ê³ ìˆê³ , partsëŠ” partNumberì™€ eTagë¥¼ ë°›ê³ ìˆìŠµë‹ˆë‹¤.</span>\r\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">// AWS SDK</span>\r\n      <span class=\"token class-name\">AmazonS3</span> s3Client <span class=\"token operator\">=</span> <span class=\"token class-name\">AmazonS3ClientBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">standard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">withRegion</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Regions</span><span class=\"token punctuation\">.</span><span class=\"token constant\">AP_NORTHEAST_2</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PartETag</span><span class=\"token punctuation\">></span></span> partETags <span class=\"token operator\">=</span> fileUploadCompleteRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getParts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">-></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PartETag</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">getPartNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span><span class=\"token function\">getETag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                <span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token class-name\">CompleteMultipartUploadRequest</span> completeRequest <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CompleteMultipartUploadRequest</span><span class=\"token punctuation\">(</span>\r\n                <span class=\"token punctuation\">[</span>s3 bucket ì£¼ì†Œ<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n                fileUploadCompleteRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                fileUploadCompleteRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getUploadId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n                partETags\r\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        s3Client<span class=\"token punctuation\">.</span><span class=\"token function\">completeMultipartUpload</span><span class=\"token punctuation\">(</span>completeRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span>  <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Complete failed\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n\r\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì™„ë£Œ\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token annotation punctuation\">@Data</span>\r\n  <span class=\"token annotation punctuation\">@Builder</span>\r\n  <span class=\"token annotation punctuation\">@NoArgsConstructor</span>\r\n  <span class=\"token annotation punctuation\">@AllArgsConstructor</span>\r\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FileUploadCompleteRequest</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token annotation punctuation\">@Schema</span><span class=\"token punctuation\">(</span>description <span class=\"token operator\">=</span> <span class=\"token string\">\"uploadId\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"uploadId\"</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> uploadId<span class=\"token punctuation\">;</span>\r\n\r\n          <span class=\"token annotation punctuation\">@Schema</span><span class=\"token punctuation\">(</span>description <span class=\"token operator\">=</span> <span class=\"token string\">\"fileSavePath\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"fileSavePath\"</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> fileSavePath<span class=\"token punctuation\">;</span>\r\n\r\n          <span class=\"token annotation punctuation\">@Schema</span><span class=\"token punctuation\">(</span>description <span class=\"token operator\">=</span> <span class=\"token string\">\"parts\"</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"parts\"</span><span class=\"token punctuation\">)</span>\r\n          <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UploadedPart</span><span class=\"token punctuation\">></span></span> parts<span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n</code></pre></div>\n<h3 id=\"êµ¬í˜„-í›„-ì—…ë¡œë“œ-ì†ë„-ë¹„êµ\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84-%ED%9B%84-%EC%97%85%EB%A1%9C%EB%93%9C-%EC%86%8D%EB%8F%84-%EB%B9%84%EA%B5%90\" aria-label=\"êµ¬í˜„ í›„ ì—…ë¡œë“œ ì†ë„ ë¹„êµ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>êµ¬í˜„ í›„ ì—…ë¡œë“œ ì†ë„ ë¹„êµ</h3>\n<ol>\n<li>\n<p>Presigned URL íŒŒì¼ ì—…ë¡œë“œ</p>\n<ol>\n<li>ë‹¨ì¼\n<ol>\n<li>ê¸°ì¡´ : 50MB / 10ì´ˆ => ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 14ë¶„</li>\n</ol>\n</li>\n<li>Multipart File\n<ol>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 2ë¶„</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>ì„œë²„ì— íŒŒì¼ì„ ì˜¬ë ¤ì„œ S3ì— ì—…ë¡œë“œ</p>\n<ol>\n<li>ë‹¨ì¼\n<ol>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 18ì´ˆ, 100MB / 30ì´ˆ</li>\n</ol>\n</li>\n<li>Multipart File\n<ol>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 18ì´ˆ, 100MB / 38ì´ˆ</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<p>ê²°ê³¼</p>\n<ol>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ì´ ì¢‹ì§€ ì•Šì€ ê²½ìš° ì„œë²„ì— íŒŒì¼ì„ ì˜¬ë¦¬ëŠ”ê²Œ íšê¸°ì ìœ¼ë¡œ ë¹¨ëë‹¤.</li>\n<li>ì„œë²„ì— íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ S3ì— ì˜¬ë¦¬ëŠ” ê²½ìš°, ì˜¤íˆë ¤ Multipart Fileì„ ì´ìš©í•˜ë©´ ë” ëŠë¦¬ë‹¤.</li>\n</ol>\n<h3 id=\"ì´í›„-ë„¤íŠ¸ì›Œí¬-ë§-ì†ë„-ê°œì„ -ëœ-í›„-ì—…ë¡œë“œ-ì†ë„\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%ED%9B%84-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EB%A7%9D-%EC%86%8D%EB%8F%84-%EA%B0%9C%EC%84%A0-%EB%90%9C-%ED%9B%84-%EC%97%85%EB%A1%9C%EB%93%9C-%EC%86%8D%EB%8F%84\" aria-label=\"ì´í›„ ë„¤íŠ¸ì›Œí¬ ë§ ì†ë„ ê°œì„  ëœ í›„ ì—…ë¡œë“œ ì†ë„ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ì´í›„ ë„¤íŠ¸ì›Œí¬ ë§ ì†ë„ ê°œì„  ëœ í›„ ì—…ë¡œë“œ ì†ë„</h3>\n<ol>\n<li>\n<p>Presigned URL íŒŒì¼ ì—…ë¡œë“œ</p>\n<ol>\n<li>ë‹¨ì¼\n<ol>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 14ë¶„</li>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  í›„ : 50MB / 14ì´ˆ, 100MB / 30ì´ˆ</li>\n</ol>\n</li>\n<li>Multipart File\n<ol>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 2ë¶„</li>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  í›„ : 50MB / 4ì´ˆ, 100MB / 6ì´ˆ</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>ì„œë²„ì— íŒŒì¼ì„ ì˜¬ë ¤ì„œ S3ì— ì—…ë¡œë“œ</p>\n<ol>\n<li>ë‹¨ì¼\n<ol>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 18ì´ˆ, 100MB / 30ì´ˆ</li>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  í›„ : 50MB / 18ì´ˆ, 100MB / 30ì´ˆ</li>\n</ol>\n</li>\n<li>Multipart File\n<ol>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 18ì´ˆ, 100MB / 38ì´ˆ</li>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  í›„ : 50MB / 18ì´ˆ, 100MB / 38ì´ˆ</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"ê²°ê³¼\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC\" aria-label=\"ê²°ê³¼ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ê²°ê³¼</h2>\n<ol>\n<li>ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ S3 ì ‘ê·¼ ì†ë„ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ëŠë ¸ë‹¤. ê·¸ë˜ì„œ Multipartë¡œ íŒŒì¼ì„ ì—…ë¡œë“œ ì‹œì¼œë„ ì—„ì²­ë‚˜ê²Œ ì†ë„ê°€ ê°œì„ ì´ ë˜ì—ˆì§€ë§Œ, ì•„ì§ë„ ëŠë ¸ë‹¤.</li>\n<li>ì„œë²„ë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ”ê±´ ë„¤íŠ¸ì›Œí¬ ë§ì´ ëŠë ¤ì§„ ê³³ì— ê±°ì¹˜ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ íŒë‹¨ëœë‹¤. ê·¸ë˜ì„œ ë„¤íŠ¸ì›Œí¬ ë§ì´ ê°œì„ ë˜ê¸° ì „ê¹Œì§€ ì„œë²„ì— íŒŒì¼ì„ ì—…ë¡œë“œ ì‹œì¼œì„œ S3ì— ë„£ì„ ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.</li>\n<li>ë¬´ì¡°ê±´ Multipart Fileì´ ì¢‹ì§„ ì•Šì•˜ë‹¤. ì„œë²„ì— Multipart Fileì„ ì˜¬ë¦¬ëŠ” ê²½ìš° ë‹¨ì¼ë¡œ ì˜¬ë¦¬ëŠ” ê²ƒë³´ë‹¤ ì†ë„ê°€ ëŠë ¸ë‹¤.</li>\n</ol>\n<h2 id=\"ê³ ì´¬\" style=\"position:relative;\"><a href=\"#%EA%B3%A0%EC%B4%AC\" aria-label=\"ê³ ì´¬ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ê³ ì´¬</h2>\n<ol>\n<li>\n<p>ë„¤íŠ¸ì›Œí¬ ë§ì´ ì•ˆì¢‹ì•˜ëŠ”ë° ì™œ ì„œë²„ë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ”ê±´ ë¹¨ëì„ê¹Œ?</p>\n<p>í”„ë¡ íŠ¸ ì„œë²„ì™€ ë°±ì—”ë“œ ì„œë²„ ë‘˜ë‹¤ AWSì— ìˆë‹¤.</p>\n<p>í´ë¼ì´ì–¸íŠ¸ => ë¬´ìˆ˜íˆ ë§ì€ ë°©í™”ë²½ => ë°±ì—”ë“œ</p>\n<p>ì•„ë§ˆ ë‚´ ì˜ˆìƒìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ ì´ìŠˆê°€ AWS ì„œë²„ê¹Œì§€ê°€ ì•„ë‹ˆê³  AWS S3 ì„œë²„ê¹Œì§€ì—ì„œ ì´ìŠˆê°€ ìˆì—ˆë˜ ê²ƒìœ¼ë¡œ íŒë‹¨ëœë‹¤. ê·¸ë˜ì„œ í´ë¼ì´ì–¸íŠ¸ì— AWS ì„œë²„ë¡œ íŒŒì¼ì´ ì˜¬ë¼ê°€ëŠ”ê±´ ì •ìƒì ì¸ ì†ë„ê°€ ë‚˜ì™”ê³ , AWS ì„œë²„ì™€ S3 ì„œë²„ ë¼ë¦¬ë„ ì†ë„ê°€ ë¹¨ëë˜ê²ƒ ê°™ë‹¤.</p>\n</li>\n<li>\n<p>Multipart Fileë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ê²½ìš° ì†ë„ê°€ ìë¥¸ íŒŒì¼ ê°œìˆ˜ë§Œí¼ ë¹¨ë¼ì§ˆ ê²ƒì´ë¼ íŒë‹¨í–ˆìœ¼ë‚˜ ê·¸ë ‡ì§€ ì•Šì•˜ë‹¤. ê·¸ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ?</p>\n<p>ë¸Œë¼ìš°ì €ì—ì„œ APIì„ í˜¸ì¶œí•  ë•Œ 100MBë©´ 10MBë‹¨ìœ„ë¡œ ì˜ëê¸° ë•Œë¬¸ì— 10ë²ˆì˜ ìš”ì²­ì„ ë³´ëƒˆë‹¤. ê° ìš”ì²­ë§ˆë‹¤ ì„œë²„ê°€ ê°ë‹¹í•˜ì§€ ëª»í•˜ê³ , ëŠë¦¬ê²Œ ì²˜ë¦¬ëœ ê²ƒì´ë‹¤. ê·¸ëŸ¼ ì™œ ì„œë²„ê°€ ê°ë‹¹í•˜ì§€ ëª»í–ˆëƒë©´? MultipartFileì€ ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ì´ ì‚¬ì‹¤ ì•„ë‹ˆì—ˆê¸° ë•Œë¬¸... MultipartFileì„ InputSrteamìœ¼ë¡œ ë°”ê¾¸ì—ˆìœ¼ë©´ ì¡°ê¸ˆ ë‹¬ë¼ì§€ì§€ ì•Šì•˜ì„ê¹Œ í•œë‹¤.</p>\n</li>\n</ol>","frontmatter":{"title":"SpringBoot, React, S3 Presigned URL, Multipart Fileì„ ì´ìš©í•´ íŒŒì¼ ì—…ë¡œë“œ ì†ë„ë¥¼ ê°œì„ í•´ë³´ì","date":"April 18, 2025","update":"April 18, 2025","tags":["react","springboot","presigned url","multipart"],"series":"File Upload","emoji":"ğŸš€"},"fields":{"slug":"/posts/react/file-upload/multipart/","readingTime":{"minutes":17.67}}},"seriesList":{"edges":[{"node":{"id":"094bd54a-dde7-55cc-9ed8-9452d5577740","fields":{"slug":"/posts/react/file-upload/presined-url/"},"frontmatter":{"title":"SpringBoot, React, S3 Presigned URLì„ ì´ìš©í•˜ì—¬ íŒŒì¼ ì—…ë¡œë“œë¥¼ í•´ë³´ì","emoji":"ğŸš€"}}},{"node":{"id":"101eb83b-5428-5522-ace9-76cd8d4e33b7","fields":{"slug":"/posts/react/file-upload/multipart/"},"frontmatter":{"title":"SpringBoot, React, S3 Presigned URL, Multipart Fileì„ ì´ìš©í•´ íŒŒì¼ ì—…ë¡œë“œ ì†ë„ë¥¼ ê°œì„ í•´ë³´ì","emoji":"ğŸš€"}}}]},"previous":{"fields":{"slug":"/posts/react/file-upload/presined-url/"},"frontmatter":{"title":"SpringBoot, React, S3 Presigned URLì„ ì´ìš©í•˜ì—¬ íŒŒì¼ ì—…ë¡œë“œë¥¼ í•´ë³´ì"}},"next":null},"pageContext":{"id":"101eb83b-5428-5522-ace9-76cd8d4e33b7","series":"File Upload","previousPostId":"094bd54a-dde7-55cc-9ed8-9452d5577740","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}
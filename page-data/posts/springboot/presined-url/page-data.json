{"componentChunkName":"component---src-templates-post-jsx","path":"/posts/springboot/presined-url/","result":{"data":{"site":{"siteMetadata":{"title":"THE GREAT PANG"}},"markdownRemark":{"id":"004e6849-c04f-5477-b3da-eab1882d5b11","excerpt":"ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½ React v18\r\nAWS SDK for Java1.x ë°°ê²½ íŒŒì¼ ì €ì¥ì†Œê°€ ë³€ê²½ë˜ì–´ S3ì— íŒŒì¼ ì—…ë¡œë“œë¥¼ êµ¬ì¶•í•˜ë ¤í•œë‹¤. ëª©í‘œ ë‚´ë¶€ ìŠ¤í† ë¦¬ì§€ì— íŒŒì¼ ì—…ë¡œë“œ í•˜ëŠ” ê²½ìš° í”„ë¡ íŠ¸ì—ì„œ ë°±ì—”ë“œë¡œ íŒŒì¼ì„ ì—…ë¡œë“œí•œë‹¤. ë³´í†µ ë³´ì•ˆì„ ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìŠ¤í† ë¦¬ì§€ ì ‘ê·¼ì„ ë§‰ê±°ë‚˜, ì„œë²„ ì•ˆì— íŒŒì¼ì„ ì ì¬â€¦","html":"<h1 id=\"ë¦¬ì•¡íŠ¸ì—ì„œ-URL-ì´ë™ì‹œ-ê°ì§€í•˜ì—¬-ì›í•˜ëŠ”-ë¡œì§ì„-ë„£ì–´ë³´ì\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EC%95%A1%ED%8A%B8%EC%97%90%EC%84%9C-URL-%EC%9D%B4%EB%8F%99%EC%8B%9C-%EA%B0%90%EC%A7%80%ED%95%98%EC%97%AC-%EC%9B%90%ED%95%98%EB%8A%94-%EB%A1%9C%EC%A7%81%EC%9D%84-%EB%84%A3%EC%96%B4%EB%B3%B4%EC%9E%90\" aria-label=\"ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì</h1>\n<h2 id=\"-í…ŒìŠ¤íŠ¸-í™˜ê²½\" style=\"position:relative;\"><a href=\"#-%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%99%98%EA%B2%BD\" aria-label=\" í…ŒìŠ¤íŠ¸ í™˜ê²½ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½</h2>\n<blockquote>\n<p>React v18\r\nAWS SDK for Java1.x</p>\n</blockquote>\n<h2 id=\"ë°°ê²½\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EA%B2%BD\" aria-label=\"ë°°ê²½ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ë°°ê²½</h2>\n<p>íŒŒì¼ ì €ì¥ì†Œê°€ ë³€ê²½ë˜ì–´ S3ì— íŒŒì¼ ì—…ë¡œë“œë¥¼ êµ¬ì¶•í•˜ë ¤í•œë‹¤.</p>\n<h2 id=\"ëª©í‘œ\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%ED%91%9C\" aria-label=\"ëª©í‘œ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ëª©í‘œ</h2>\n<p>ë‚´ë¶€ ìŠ¤í† ë¦¬ì§€ì— íŒŒì¼ ì—…ë¡œë“œ í•˜ëŠ” ê²½ìš° í”„ë¡ íŠ¸ì—ì„œ ë°±ì—”ë“œë¡œ íŒŒì¼ì„ ì—…ë¡œë“œí•œë‹¤.</p>\n<p>ë³´í†µ ë³´ì•ˆì„ ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìŠ¤í† ë¦¬ì§€ ì ‘ê·¼ì„ ë§‰ê±°ë‚˜, ì„œë²„ ì•ˆì— íŒŒì¼ì„ ì ì¬í•˜ëŠ” ê²½ìš°ê°€ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ê·¸ë˜ì„œ í”„ë¡ íŠ¸ì—ì„œ ë°±ì—”ë“œë¡œ íŒŒì¼ì„ ìŠ¤íŠ¸ë¦¬ë° í˜•ì‹ìœ¼ë¡œ ì—…ë¡œë“œí•˜ê³  S3ì— ì—…ë¡œë“œ í•˜ëŠ” ë°©ë²•ê³¼ AWS S3ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì„œë²„ë¥¼ ê±°ì¹˜ì§€ ì•Šê³  Presigned URLì„ ì´ìš©í•˜ì—¬ AWS S3ì— íŒŒì¼ì„ ì˜¬ë¦¬ë ¤ í•œë‹¤.</p>\n<ol>\n<li>\n<p>í”„ë¡ íŠ¸ì—ì„œ ìŠ¤íŠ¸ë¦¬ë° í˜•ì‹ìœ¼ë¡œ ë°±ì—”ë“œë¡œ íŒŒì¼ì„ S3ì— ì—…ë¡œë“œí•˜ëŠ” ë°©ë²•</p>\n<p>ìë°”ì—ì„œ íŒŒì¼ì„ ë‹¤ë£¨ëŠ” ê²½ìš° íŒŒì¼ ìì²´ê°€ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ê¸° ë•Œë¬¸ì— OOMì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤.\r\nê·¸ë˜ì„œ ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ì„ í†µí•´ ë©”ëª¨ë¦¬ ë¶€ë‹´ ì—†ì´ íŒŒì¼ì„ ì˜¬ë ¤ë³´ë„ë¡ í•˜ì</p>\n</li>\n<li>\n<p>í”„ë¡ íŠ¸ì—ì„œ AWS S3 Presigned URLì„ ì´ìš©í•˜ì—¬ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ëŠ” ë°©ë²•</p>\n</li>\n</ol>\n<h2 id=\"êµ¬í˜„\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"êµ¬í˜„ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>êµ¬í˜„</h2>\n<h3 id=\"1-í”„ë¡ íŠ¸ì—ì„œ-ìŠ¤íŠ¸ë¦¬ë°-í˜•ì‹ìœ¼ë¡œ-ë°±ì—”ë“œë¡œ-íŒŒì¼ì„-S3ì—-ì—…ë¡œë“œí•˜ëŠ”-ë°©ë²•\" style=\"position:relative;\"><a href=\"#1-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%90%EC%84%9C-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-%ED%98%95%EC%8B%9D%EC%9C%BC%EB%A1%9C-%EB%B0%B1%EC%97%94%EB%93%9C%EB%A1%9C-%ED%8C%8C%EC%9D%BC%EC%9D%84-S3%EC%97%90-%EC%97%85%EB%A1%9C%EB%93%9C%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"1 í”„ë¡ íŠ¸ì—ì„œ ìŠ¤íŠ¸ë¦¬ë° í˜•ì‹ìœ¼ë¡œ ë°±ì—”ë“œë¡œ íŒŒì¼ì„ S3ì— ì—…ë¡œë“œí•˜ëŠ” ë°©ë²• permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1. í”„ë¡ íŠ¸ì—ì„œ ìŠ¤íŠ¸ë¦¬ë° í˜•ì‹ìœ¼ë¡œ ë°±ì—”ë“œë¡œ íŒŒì¼ì„ S3ì— ì—…ë¡œë“œí•˜ëŠ” ë°©ë²•</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> FileUploader <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>files<span class=\"token punctuation\">,</span> setFiles<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span>File<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      <span class=\"token function-variable function\">saveFiles</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> onSaveFiles<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSaveFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">// 1. ì„œë²„ì— ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ fileì„ ì˜¬ë¦¬ëŠ” ë¡œì§</span>\r\n      <span class=\"token keyword\">await</span> <span class=\"token function\">processUploadFilesWithStreaming</span><span class=\"token punctuation\">(</span>files<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// 1. ì„œë²„ì— ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ fileì„ ì˜¬ë¦¬ëŠ” ë¡œì§</span>\r\n    <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">processUploadFilesWithStreaming</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">newFiles</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> formData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>newFiles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        formData<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'files'</span><span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// filesëŠ” ì„œë²„ì—ì„œ List&lt;MultipartFile>ë¡œ ë°›ìŒ</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/upload\"</span><span class=\"token punctuation\">,</span> formData<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token string-property property\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"multipart/form-data\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ìƒëµí•´ë„ ë¸Œë¼ìš°ì €ê°€ ì•Œì•„ì„œ ë„£ìŒ</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">...</span>\r\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">  <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/upload/server\"</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">uploadFilesS3</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"files\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">MultipartFile</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> files<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">MultipartFile</span> file <span class=\"token operator\">:</span> files<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// S3ì— ì €ì¥ë  í‚¤ ê°’(S3 ë‚´ì—ì„œëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë´ë„ ëœë‹¤.)</span>\r\n        <span class=\"token class-name\">String</span> key <span class=\"token operator\">=</span> <span class=\"token string\">\"upload/\"</span> <span class=\"token operator\">+</span> <span class=\"token constant\">UUID</span><span class=\"token punctuation\">.</span><span class=\"token function\">randomUUID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"_\"</span> <span class=\"token operator\">+</span> file<span class=\"token punctuation\">.</span><span class=\"token function\">getOriginalFileName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// file.getInputStream()ìœ¼ë¡œ ì ‘ê·¼ì‹œ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ì§€ ì•Šê³  ìŠ¤íŠ¸ë¦¬ë° í˜•ì‹ìœ¼ë¡œ ë™ì‘</span>\r\n        <span class=\"token comment\">// ë§Œì•½ byte[], file.transferTo() ê°™ì€ ê²½ìš°ëŠ” Heapì— ì˜¬ë ¤ì„œ ë²„í¼ë§í•˜ê¸° ë•Œë¬¸ì— ì§€ì–‘í•´ì•¼í•¨.</span>\r\n        <span class=\"token class-name\">InputStream</span> inputStream <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span><span class=\"token function\">getInputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">ObjectMetadata</span> metadata <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectMetadata</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        metadata<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span><span class=\"token function\">getContentType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        metadata<span class=\"token punctuation\">.</span><span class=\"token function\">setContentLength</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span><span class=\"token function\">getSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n\r\n        <span class=\"token class-name\">AmazonS3</span> s3Client <span class=\"token operator\">=</span> <span class=\"token class-name\">AmazonS3ClientBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">standard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">withRegion</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Regions</span><span class=\"token punctuation\">.</span><span class=\"token constant\">AP_NORTHEAST_2</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// S3ì— MultiFileì„ ì˜¬ë¦¬ëŠ” í•¨ìˆ˜</span>\r\n        s3Client<span class=\"token punctuation\">.</span><span class=\"token function\">putObject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">PutObjectRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>s3 bucket ì£¼ì†Œ<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> inputStream<span class=\"token punctuation\">,</span> metadata<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Upload failed for file: \"</span> <span class=\"token operator\">+</span> file<span class=\"token punctuation\">.</span><span class=\"token function\">getOriginalFilename</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì—…ë¡œë“œ ì„±ê³µ\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>ì§ˆë¬¸\r\nQ1. ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ì´ ë¬´ì—‡ì¸ê°€ìš”?\r\nA1. ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì²˜ë¦¬í•˜ì§€ ì•Šê³ , ì¼ì • ë‹¨ìœ„ë¡œ ëŠì–´ì„œ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹. EKS ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ì ê²Œ í• ë‹¹í•˜ëŠ” ì‹œìŠ¤í…œì¸ ê²½ìš° íŒŒì¼ì„ ì²˜ë¦¬í•  ë•Œ ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ì„ ì´ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, íŒŒì¼ ê°ì²´ë¥¼ ë©”ëª¨ë¦¬ë¥¼ ê·¸ëŒ€ë¡œ ë‹´ê¸° ë•Œë¬¸ì— OOMì´ ì¼ì–´ë‚  ìˆ˜ ìˆìŒ.\r\nQ2. POSTë¡œ bodyì— ë‹´ì•„ ë³´ëƒˆëŠ”ë° ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” @RequestParamìœ¼ë¡œ ë°›ë‚˜ìš”? @RequestBodyê°€ ì•„ë‹Œê°€ìš”?\r\nA2. í”„ë¡ íŠ¸ì—ì„œ FormDataë¥¼ ë³´ë‚´ëŠ” ê²½ìš°, FormDataëŠ” ë¸Œë¼ìš°ì €ì—ì„œ Content-Typeì„ ê¸°ë³¸ì ìœ¼ë¡œ multipart/form-dataí˜•ì‹ìœ¼ë¡œ ë³´ë‚´ê¸° ë•Œë¬¸ì—, ìŠ¤í”„ë§ì€ @RequestParamìœ¼ë¡œ ë°›ì•„ì•¼ í•¨. ì¦‰, Content-Type ë•Œë¬¸ì´ë‹¤.</p>\n</blockquote>\n<h3 id=\"2-Presigned-Urlë¡œ-íŒŒì¼ì„-ì˜¬ë¦¬ëŠ”-ë°©ë²•\" style=\"position:relative;\"><a href=\"#2-Presigned-Url%EB%A1%9C-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EC%98%AC%EB%A6%AC%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"2 Presigned Urlë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ë°©ë²• permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>2. Presigned Urlë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ë°©ë²•</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> FileUploader <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>files<span class=\"token punctuation\">,</span> setFiles<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span>File<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      <span class=\"token function-variable function\">saveFiles</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> onSaveFiles<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSaveFiles</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token comment\">// 2. presigned Urlë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ë¡œì§</span>\r\n      <span class=\"token keyword\">await</span> <span class=\"token function\">processUploadFilesWithPresignedUrl</span><span class=\"token punctuation\">(</span>files<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token comment\">// 2. presigned Urlë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ë¡œì§</span>\r\n    <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">processUploadFilesWithPresignedUrl</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">newFiles</span><span class=\"token operator\">:</span> File<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">fileSizeArr</span><span class=\"token operator\">:</span> number<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">fileNameArr</span><span class=\"token operator\">:</span> String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">fileTypeArr</span><span class=\"token operator\">:</span> String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n      Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>newFiles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n        fileSizeArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        fileNameArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        fileTypeArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\n      <span class=\"token comment\">// Presigned URLì„ íŒŒì¼ ì •ë³´ë“¤ì„ ë³´ë‚´ì„œ ì„œë²„ì—ì„œ ê°€ì ¸ì˜´</span>\r\n      <span class=\"token keyword\">const</span> preSignedUrlResponse <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/upload/presigned-url\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token literal-property property\">fileSizeList</span><span class=\"token operator\">:</span> fileSizeArr<span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">fileNameList</span><span class=\"token operator\">:</span> fileNameArr<span class=\"token punctuation\">,</span>\r\n          <span class=\"token literal-property property\">fileTypeList</span><span class=\"token operator\">:</span> fileTypeArr\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>preSignedUrlResponse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token comment\">// PreSigned URLê°€ì§€ê³  ê° íŒŒì¼ ì—…ë¡œë“œ</span>\r\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> idx <span class=\"token keyword\">in</span> preSignedUrlResponse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>preSignedUrlResponse<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>preSignedUrl<span class=\"token punctuation\">,</span> newFiles<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n              <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> newFiles<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">,</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">...</span>\r\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">  <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/upload/presigned-url\"</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> getPresignedUrl <span class=\"token punctuation\">(</span>\r\n    <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fileSizeList\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">></span></span> fileSizeList<span class=\"token punctuation\">,</span>\r\n    <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fileNameList\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> fileNameList<span class=\"token punctuation\">,</span>\r\n    <span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fileTypeList\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> fileTypeList\r\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Strng</span><span class=\"token punctuation\">></span></span> presginedUrlList <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> fileNameList<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">int</span> fileSize <span class=\"token operator\">=</span> fileSizeList<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token class-name\">String</span> fileType <span class=\"token operator\">=</span> fileTypeList<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// S3ì— ì €ì¥ë  í‚¤ ê°’(S3 ë‚´ì—ì„œëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë´ë„ ëœë‹¤.)</span>\r\n        <span class=\"token class-name\">String</span> key <span class=\"token operator\">=</span> <span class=\"token string\">\"upload/\"</span> <span class=\"token operator\">+</span> <span class=\"token constant\">UUID</span><span class=\"token punctuation\">.</span><span class=\"token function\">randomUUID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"_\"</span> <span class=\"token operator\">+</span> fileNameList<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// AWS SDK</span>\r\n        <span class=\"token class-name\">AmazonS3</span> s3Client <span class=\"token operator\">=</span> <span class=\"token class-name\">AmazonS3ClientBuilder</span><span class=\"token punctuation\">.</span><span class=\"token function\">standard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n                      <span class=\"token punctuation\">.</span><span class=\"token function\">withRegion</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Regions</span><span class=\"token punctuation\">.</span><span class=\"token constant\">AP_NORTHEAST_2</span><span class=\"token punctuation\">)</span>\r\n                      <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// Pre-Signed URL ë§Œë£Œ ì‹œê°„ (60ë¶„ í›„)</span>\r\n        <span class=\"token class-name\">Date</span> expiration <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token keyword\">long</span> expTimeMillis <span class=\"token operator\">=</span> expiration<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// 10ë¶„ í›„ ë§Œë£Œ</span>\r\n        expTimeMillis <span class=\"token operator\">+=</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MINUTES</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMillis</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        expiration<span class=\"token punctuation\">.</span><span class=\"token function\">setTime</span><span class=\"token punctuation\">(</span>expTimeMillis<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token comment\">// PUT Pre-Signed URL (PUT)</span>\r\n        <span class=\"token class-name\">GeneratePresignedUrlRequest</span> generatePresignedUrlRequest <span class=\"token operator\">=</span>\r\n                <span class=\"token keyword\">new</span> <span class=\"token class-name\">GeneratePresignedUrlRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>s3 bucket ì£¼ì†Œ<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span>\r\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">withMethod</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpMethod</span><span class=\"token punctuation\">.</span><span class=\"token constant\">PUT</span><span class=\"token punctuation\">)</span>\r\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">withContentType</span><span class=\"token punctuation\">(</span>fileType<span class=\"token punctuation\">)</span>\r\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">withExpiration</span><span class=\"token punctuation\">(</span>expiration<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n        <span class=\"token class-name\">URL</span> url <span class=\"token operator\">=</span> s3Client<span class=\"token punctuation\">.</span><span class=\"token function\">generatePresignedUrl</span><span class=\"token punctuation\">(</span>generatePresignedUrlRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n        presginedUrlList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Presigned URL failed for file: \"</span> <span class=\"token operator\">+</span> fileNameList<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\". Error: \"</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>presginedUrlList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>ì§ˆë¬¸\r\nQ1. Presigned URLì„ ì™œ ì‚¬ìš©í•˜ë‚˜ìš”?\r\nA1. ì„œë²„ì— íŒŒì¼ì„ ì˜¬ë¦¬ì§€ ì•Šê³  S3ì— ì§ì ‘ íŒŒì¼ì„ ì˜¬ë¦´ ìˆ˜ ìˆì–´, ì„œë²„ ë¶€ë‹´ì„ í˜„ì €íˆ ì¤„í ìˆ˜ ìˆìŒ\r\nQ2. ë³´ì•ˆì—ëŠ” ì•ˆì¢‹ì§€ ì•Šì„ê¹Œìš”?\r\nA2. ë¬¼ë¡  Presigned URLì´ ìœ ì¶œë˜ë©´ ì¢‹ì§„ ì•Šì§€ë§Œ, HTTPSë¡œ URLì„ ë°›ì•„ ì‚¬ìš©í•˜ê³ , ìœ íš¨ê¸°ê°„ì„ ì„¤ì •í•˜ì—¬ì„œ ì“°ê¸° ë•Œë¬¸ì— ì ì ˆí•˜ê²Œ ì“°ë©´ ê´œì°®ë‹¤. ë¬¼ë¡  CORS ì„¤ì •ìœ¼ë¡œ ì›í•˜ëŠ” URLì—ì„œë§Œ ë“¤ì–´ì˜¤ê²Œ í•˜ë©´ ë³´ì•ˆ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>\n</blockquote>\n<h2 id=\"ê²°ê³¼\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC\" aria-label=\"ê²°ê³¼ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ê²°ê³¼</h2>\n<p>ê°„ë‹¨í•œ í˜•íƒœì˜ ì„œë²„ ì—…ë¡œë“œì™€ Presigned URL ì—…ë¡œë“œë¥¼ í•´ë´¤ë‹¤. AWS S3ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê°„ë‹¨í•œ ë°©ì‹ìœ¼ë¡œ ì„œë²„ì— ë¶€ë‹´ ì—†ê²Œ íŒŒì¼ ì—…ë¡œë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.</p>\n<h2 id=\"ê³ ì´¬\" style=\"position:relative;\"><a href=\"#%EA%B3%A0%EC%B4%AC\" aria-label=\"ê³ ì´¬ permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>ê³ ì´¬</h2>\n<p>íŒŒì¼ ì—…ë¡œë“œë¥¼ ì„œë²„ê°€ ë§¡ì§€ ì•Šê³ , í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë§¡ê¸°ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì—, AWS S3ê°€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì ‘ê·¼ì´ ë˜ì–´ì•¼ í•œë‹¤ëŠ”ì .</p>\n<p>AWS S3 ì ‘ê·¼ì´ ì–´ë µê±°ë‚˜, AWS ì ‘ê·¼ ë§ ì†ë„ê°€ ëŠë¦¬ë©´ íŒŒì¼ì—…ë¡œë“œê°€ ëŠë¦° ì¼ì´ ìƒê¸´ë‹¤.</p>\n<p>ì‹¤ì œë¡œ ìš´ì˜í•˜ëŠ” ì‹œìŠ¤í…œì—ì„œ ìƒê¸´ ì¼ì´ê¸° ë•Œë¬¸ì— ë‹¤ìŒ ê¸€ì€ íŒŒì¼ ì—…ë¡œë“œ ì†ë„ ê°œì„  ì‘ì—…ì— ëŒ€í•´ ì‘ì„±í•  ê²ƒì´ë‹¤.</p>\n<p>íŒŒì¼ ì—…ë¡œë“œë¥¼ ë„¤ ê°€ì§€ ë°©ë²•ì„ ë¹„êµí•´ë³¼ ê²ƒì´ë‹¤.</p>","frontmatter":{"title":"SpringBoot, React, S3 Presigned URLì„ ì´ìš©í•˜ì—¬ íŒŒì¼ ì—…ë¡œë“œë¥¼ í•´ë³´ì","date":"April 18, 2025","update":"April 18, 2025","tags":["react","springboot"],"series":"SpringBoot","emoji":"ğŸš€"},"fields":{"slug":"/posts/springboot/presined-url/","readingTime":{"minutes":7.645}}},"seriesList":{"edges":[{"node":{"id":"d24866a3-a43b-5f4f-b0c5-039c04524257","fields":{"slug":"/posts/springboot/file-upload/"},"frontmatter":{"title":"SpringBoot, React, S3 Presigned URLì„ ì´ìš©í•˜ì—¬ íŒŒì¼ ì—…ë¡œë“œ ì†ë„ë¥¼ ê°œì„ í•´ë³´ì","emoji":"ğŸš€"}}},{"node":{"id":"004e6849-c04f-5477-b3da-eab1882d5b11","fields":{"slug":"/posts/springboot/presined-url/"},"frontmatter":{"title":"SpringBoot, React, S3 Presigned URLì„ ì´ìš©í•˜ì—¬ íŒŒì¼ ì—…ë¡œë“œë¥¼ í•´ë³´ì","emoji":"ğŸš€"}}}]},"previous":{"fields":{"slug":"/posts/springboot/file-upload/"},"frontmatter":{"title":"SpringBoot, React, S3 Presigned URLì„ ì´ìš©í•˜ì—¬ íŒŒì¼ ì—…ë¡œë“œ ì†ë„ë¥¼ ê°œì„ í•´ë³´ì"}},"next":null},"pageContext":{"id":"004e6849-c04f-5477-b3da-eab1882d5b11","series":"SpringBoot","previousPostId":"d24866a3-a43b-5f4f-b0c5-039c04524257","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}
{"componentChunkName":"component---src-pages-index-jsx","path":"/","result":{"data":{"allMarkdownRemark":{"nodes":[{"excerpt":"ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½ React v18 AWS SDK for Java1.x ë°±ì—”ë“œ : AWS EKS í™˜ê²½ í”„ë¡ íŠ¸ : AWS S3 Nginx í™˜ê²½ ë°°ê²½ ê¸°ë³¸ì ìœ¼ë¡œ ì—…ë¡œë“œ í‰ê·  ì†ë„ëŠ” 5MB/s ë¼ê³ í•œë‹¤. íŒŒì¼ì„ Presigned URLì— í†µì§¸ë¡œ ì˜¬ë¦¬ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œë°œí•´ë‘ê³  50MB íŒŒì¼ì´ ì•½ 10ì´ˆ ì •ë„ ê±¸â€¦","fields":{"slug":"/posts/springboot/file-upload/"},"frontmatter":{"date":"April 18, 2025","title":"SpringBoot, React, S3 Presigned URL, Multipart Fileì„ ì´ìš©í•´ íŒŒì¼ ì—…ë¡œë“œ ì†ë„ë¥¼ ê°œì„ í•´ë³´ì","tags":["react","springboot"],"emoji":"ğŸš€","series":"SpringBoot"},"rawMarkdownBody":"\r\n# ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì\r\n\r\n## ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½\r\n\r\n> React v18\r\n>\r\n> AWS SDK for Java1.x\r\n>\r\n> ë°±ì—”ë“œ : AWS EKS í™˜ê²½\r\n>\r\n> í”„ë¡ íŠ¸ : AWS S3 Nginx í™˜ê²½\r\n\r\n## ë°°ê²½\r\n\r\nê¸°ë³¸ì ìœ¼ë¡œ ì—…ë¡œë“œ í‰ê·  ì†ë„ëŠ” 5MB/s ë¼ê³ í•œë‹¤.\r\n\r\níŒŒì¼ì„ Presigned URLì— í†µì§¸ë¡œ ì˜¬ë¦¬ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œë°œí•´ë‘ê³  50MB íŒŒì¼ì´ ì•½ 10ì´ˆ ì •ë„ ê±¸ë ¸ì—ˆë‹¤.\r\n\r\në¬¸ì œê°€ ìƒê²¼ë‹¤. ê³ ê°ìª½ ë„¤íŠ¸ì›Œí¬ ë§ì´ ìƒíƒœê°€ ì•ˆì¢‹ì€ì§€ ì—…ë¡œë“œ ì†ë„ê°€ ì‹¬ê°í•˜ê²Œ ëŠë ¤ì¡Œë‹¤.\r\n\r\në„¤íŠ¸ì›Œí¬ ìª½ì—ì„œ ì²˜ë¦¬ë¥¼ í•´ì£¼ê² ì§€ë§Œ, ìš°ì„ ì ìœ¼ë¡œ ì‹œìŠ¤í…œ ë‚´ë¶€ì—ì„œ ê°œì„ í•  ë‚´ìš©ì„ ì°¾ì•„ë³´ì.\r\n\r\n## ëª©í‘œ\r\n\r\n1. Presigned URL ì†ë„ ì²´í¬\r\n2. 4ê°€ì§€ ë°©ë²• êµ¬í˜„ í›„ ì†ë„ ë¹„êµ\r\n   1. Presigned URLì„ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ\r\n   2. Presigned URLì„ ì´ìš©í•œ Multipart File ì—…ë¡œë“œ\r\n   3. ì„œë²„ì— íŒŒì¼ ì—…ë¡œë“œ í•˜ì—¬ S3ì— ì—…ë¡œë“œ\r\n   4. ì„œë²„ì— Multipart Fileì„ ì—…ë¡œë“œí•˜ì—¬ S3ì— ì—…ë¡œë“œ\r\n3. ë„¤íŠ¸ì›Œí¬ ê°œì„  í›„ íŒŒì¼ ì—…ë¡œë“œ ì†ë„ ë¹„êµ\r\n\r\n## êµ¬í˜„\r\n\r\n### êµ¬í˜„í•˜ê¸° ì•ì„œ ì—…ë¡œë“œ ì†ë„ ì²´í¬\r\n\r\n- ë¸Œë¼ìš°ì €ì—ì„œ S3 ì§ì ‘ íŒŒì¼ ì „ì†¡\r\n  - ê¸°ì¡´ 50MB / 10ì´ˆ => ë„¤íŠ¸ì›Œí¬ ë§ ìƒíƒœê°€ ì•ˆì¢‹ì•„ì§„ ìƒí™© : 50MB / 14ë¶„\r\n\r\n### 1. Presigned URL multipart íŒŒì¼ ì—…ë¡œë“œ\r\n\r\n#### React\r\n\r\në™ì‘ ë°©ì‹\r\n\r\n1. í”„ë¡ íŠ¸ì—ì„œ ì˜¬ë¦´ íŒŒì¼ì„ ìë¥¸ë‹¤.(Multipartë¡œ íŒŒì¼ì„ ìë¥¸ë‹¤.)\r\n2. í”„ë¡ íŠ¸ì—ì„œ ì˜¬ë¦´ íŒŒì¼ ì •ë³´ë¥¼ ë°±ì—”ë“œë¡œ ì†¡ì‹ í•˜ì—¬ ë°±ì—”ë“œì—ì„œ Presigned URLì„ ë°›ì•„ì˜¨ë‹¤.\r\n   - í”„ë¡ íŠ¸ì—ì„œ S3ë¡œë¶€í„° Presigned URLì„ ë°›ì§€ ì•Šê³  ë°±ì—”ë“œì—ì„œ ë°›ë„ë¡ í•˜ì˜€ë‹¤.\r\n3. Multipart Fileì„ Presigned URLì„ ì´ìš©í•´ S3ì— ì—…ë¡œë“œí•œë‹¤.\r\n4. Multipart Fileì´ ëª¨ë‘ ì—…ë¡œë“œë˜ë©´, S3ì—ì„œ í•©ì¹  ìˆ˜ ìˆë„ë¡ ë°±ì—”ë“œì— ìš”ì²­í•œë‹¤.\r\n\r\n```javascript\r\n// Multipart Fileë¡œ íŒŒì¼ ì—…ë¡œë“œ ë¡œì§\r\nexport const FileUploader = forwardRef(props, ref) => {\r\n    const [files, setFiles] = useState<File[]>([]);\r\n\r\n    useImperativeHandle(ref, () => ({\r\n      saveFiles: () => onSaveFiles,\r\n    }))\r\n\r\n    const onSaveFiles = () => {\r\n      // 1. presigned Url multipart íŒŒì¼ ì—…ë¡œë“œ\r\n      await processUploadMultipartFilesWithPresignedUrl(files);\r\n\r\n      ...\r\n    }\r\n\r\n    // 1. presigned Urlë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ë¡œì§\r\n    async function processUploadMultipartFilesWithPresignedUrl(files: File[]) {\r\n      // íŒŒì¼ì„ ì–¼ë§ˆ ë‹¨ìœ„ë¡œ ìë¥¼ì§€ ì„¤ì •í•œë‹¤. AWS S3ì—ì„œëŠ” 5MBë¥¼ ìµœì†Œ í¬ê¸°ë¡œ ì¡ëŠ”ë‹¤.\r\n      const chunkSize = 10 * 1024 * 1024;\r\n      const partCount = Math.ceil(file.size / chunkSize);\r\n\r\n      const uploadPromises = files.map((file) =>\r\n          processUploadMultipartFileWithPresignedUrl(file, chunkSize)\r\n            .then(() => ({ file, status: 'fulfilled' }))\r\n            .catch((error) => ({ file, status: 'rejected', error }))\r\n        );\r\n\r\n      const results = await Promise.allSettled(uploadPromises);\r\n\r\n      const successFiles: File[] = [];\r\n      const failedFiles: File[] = [];\r\n\r\n      results.forEach((result, idx) => {\r\n        const { status, value, reason } = result;\r\n\r\n        if (status === 'fulfilled') {\r\n          const res = value;\r\n          if (res.status === 'fulfilled') {\r\n            successFiles.push(res.file);\r\n          } else {\r\n            console.error(`${res.file.name} ì—…ë¡œë“œ ì‹¤íŒ¨`, res.error);\r\n            failedFiles.push(res.file);\r\n          }\r\n        } else {\r\n          console.error(`${files[idx].name} ì—…ë¡œë“œ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì‹¤íŒ¨`, reason);\r\n          failedFiles.push(files[idx]);\r\n        }\r\n      });\r\n\r\n      console.log(\r\n        'âœ… ì„±ê³µí•œ íŒŒì¼:',\r\n        successFiles.map((f) => f.name)\r\n      );\r\n      console.log(\r\n        'âŒ ì‹¤íŒ¨í•œ íŒŒì¼:',\r\n        failedFiles.map((f) => f.name)\r\n      );\r\n    }\r\n\r\n    return ...\r\n  }\r\n\r\n  const processUploadMultipartFileWithPresignedUrl = async (\r\n      file: File,\r\n      chunkSize: number\r\n    ) => {\r\n      const partCount = Math.ceil(file.size / chunkSize);\r\n\r\n      try {\r\n        // 1. í”„ë¡ íŠ¸ì—ì„œ ì˜¬ë¦´ íŒŒì¼ ì •ë³´ë¥¼ ë°±ì—”ë“œë¡œ ì†¡ì‹ í•˜ì—¬ ë°±ì—”ë“œì—ì„œ Presigned URLì„ ë°›ì•„ì˜¨ë‹¤.\r\n        const FileUploadStartResponse = await axios.get(\"/api/upload/presigned-url/start\", {\r\n          params: {\r\n            fileSize: String(file.size),\r\n            fileName: file.name,\r\n            fileType: file.type,\r\n            partCount: String(partCount),\r\n          },\r\n        })\r\n\r\n        const { uploadId, preSignedUrlList, key } = FileUploadStartResponse;\r\n        // const parts: { partNumber: number; eTag: string }[] = [];\r\n\r\n        // 2. ìë¥¸ íŒŒì¼(Multipart File)ì„ Presigned URLì— ì˜¬ë¦°ë‹¤.\r\n        const uploadPart = async (i: number) => {\r\n          const start = i * chunkSize;\r\n          const end = Math.min(file.size, start + chunkSize);\r\n          const blob = file.slice(start, end);\r\n\r\n          const res = await axios.put(preSignedUrlList[i], blob, {\r\n            headers: {\r\n              'Content-Type': file.type,\r\n            },\r\n          });\r\n\r\n          /*\r\n              2-1. íŒŒíŠ¸ ì—…ë¡œë“œì‹œ S3ì—ì„œ Response Headerì— eTag ê°’ì„ ë³´ë‚´ì£¼ëŠ”ë°, ê°€ì§€ê³  ìˆì–´ì•¼í•œë‹¤.\r\n              ì´ ê°’ì„ ì œëŒ€ë¡œ ë°›ìœ¼ë ¤ë©´, s3 header cors ì„¤ì •ì´ í•„ìš”í•˜ë‹¤.\r\n           */\r\n          const eTag = res.headers.etag || res.headers.ETag || res.headers.Etag;\r\n          return { partNumber: i + 1, eTag: eTag.replace(/\"/g, '') };\r\n        };\r\n\r\n        // 3. ë³‘ë ¬ ì—…ë¡œë“œ\r\n        const uploadPromises = Array.from({ length: partCount }, (_, i) => uploadPart(i));\r\n        const parts = await Promise.all(uploadPromises);\r\n\r\n        // 4. ì™„ë£Œìš”ì²­(ì™„ë£Œ ìš”ì²­ì„ í•´ì•¼ partë¡œ ì˜¬ë¼ê°„ íŒŒì¼ë“¤ì„ S3ë‚´ì—ì„œ í•©ì³ì¤€ë‹¤)\r\n        await axios.post(\"/api/upload/presigned-url/complete\", {\r\n          uploadId: uploadId,\r\n          key: key,\r\n          parts: parts,\r\n        });\r\n      } catch (error) {\r\n        console.error(`${file.name} ì—…ë¡œë“œ ì‹¤íŒ¨`, error);\r\n      }\r\n    };\r\n```\r\n\r\n#### SpringBoot\r\n\r\në™ì‘ë°©ì‹\r\n\r\n1. /api/upload/presigned-url/start ì—ì„œëŠ” íŒŒì¼ ì •ë³´ë¥¼ ë°›ì•„ Presigned URLì„ ë§Œë“¤ì–´ ë³´ë‚´ì¤€ë‹¤.\r\n2. /api/upload/presigned-url/complete ì—ì„œëŠ” Multipart Fileì„ S3ì—ì„œ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ í•©ì³ì§€ë„ë¡ S3 ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.\r\n\r\n```java\r\n  @GetMapping(value = \"/api/upload/presigned-url/start\")\r\n  public ResponseEntity<FileUploadStartResponse> startMultipartUpload(\r\n          @RequestParam(\"fileName\") @NotBlank String fileName\r\n          , @RequestParam(\"fileSize\") @NotBlank String fileSize\r\n          , @RequestParam(\"fileType\") @NotBlank String fileType\r\n          , @RequestParam(\"partCount\") @NotBlank int partCount\r\n  ) {\r\n      // AWS SDK\r\n      AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n                    .withRegion(Regions.AP_NORTHEAST_2)\r\n                    .build();\r\n\r\n      // S3ì— ì €ì¥ë  í‚¤ ê°’(S3 ë‚´ì—ì„œëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë´ë„ ëœë‹¤.)\r\n      String key = \"upload/\" + UUID.randomUUID() + \"_\" + fileName;\r\n\r\n      ObjectMetadata metadata = new ObjectMetadata();\r\n      metadata.setContentType(fileType);\r\n\r\n      String uploadId = \"\";\r\n      List<String> preSignedUrls = new ArrayList<>();\r\n\r\n      try {\r\n        InitiateMultipartUploadRequest initRequest = new InitiateMultipartUploadRequest([s3 bucket ì£¼ì†Œ], key)\r\n                .withObjectMetadata(metadata);\r\n\r\n        uploadId = s3Client.initiateMultipartUpload(initRequest).getUploadId();\r\n\r\n        // Pre-Signed URL ë§Œë£Œ ì‹œê°„ (60ë¶„ í›„)\r\n        Date expiration = new Date();\r\n        long expTimeMillis = expiration.getTime();\r\n        // 10ë¶„ í›„ ë§Œë£Œ\r\n        expTimeMillis += TimeUnit.MINUTES.toMillis(10);\r\n        expiration.setTime(expTimeMillis);\r\n\r\n        // ê° partì— ëŒ€í•œ Pre-Signed URL ìƒì„±\r\n\r\n        for (int i = 0; i < partCount; i++) {\r\n            GeneratePresignedUrlRequest generatePresignedUrlRequest = new GeneratePresignedUrlRequest([s3 bucket ì£¼ì†Œ], key)\r\n                    .withMethod(HttpMethod.PUT)\r\n                    .withExpiration(expiration)\r\n                    .withContentType(fileType);\r\n            generatePresignedUrlRequest.addRequestParameter(\"partNumber\", String.valueOf(i + 1));\r\n            generatePresignedUrlRequest.addRequestParameter(\"uploadId\", uploadId);\r\n\r\n            URL url = s3Client.generatePresignedUrl(generatePresignedUrlRequest);\r\n            preSignedUrls.add(url.toString());\r\n        }\r\n\r\n      } catch (Exception e) {\r\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\r\n            .body(\"Presigned URL failed for file: \" + fileName + \". Error: \" + e.getMessage());\r\n      }\r\n\r\n      return ResponseEntity.ok(FileUploadStartResponse.builder()\r\n                .uploadId(uploadId)\r\n                .preSignedUrlList(preSignedUrls)\r\n                .key(key)\r\n                .build()\r\n              );\r\n  }\r\n\r\n\r\n  @PostMapping(value = \"/api/upload/presigned-url/complete\")\r\n  public ResponseEntity<String> completeMultipartUpload(\r\n          @RequestBody FileUploadCompleteRequest fileUploadCompleteRequest\r\n          //uploadId, key, parts ì„¸ê°œë¥¼ ë°›ê³ ìˆê³ , partsëŠ” partNumberì™€ eTagë¥¼ ë°›ê³ ìˆìŠµë‹ˆë‹¤.\r\n  ) {\r\n      // AWS SDK\r\n      AmazonS3 s3Client = s3Service.getS3Client();\r\n\r\n      try {\r\n        List<PartETag> partETags = fileUploadCompleteRequest.getParts().stream()\r\n              .map(p -> new PartETag(p.getPartNumber(), p.getETag()))\r\n              .collect(Collectors.toList());\r\n\r\n        CompleteMultipartUploadRequest completeRequest = new CompleteMultipartUploadRequest(\r\n          [s3 bucket ì£¼ì†Œ],\r\n                fileUploadCompleteRequest.getKey(),\r\n                fileUploadCompleteRequest.getUploadId(),\r\n                partETags\r\n        );\r\n\r\n        s3Client.completeMultipartUpload(completeRequest);\r\n\r\n      } catch  (Exception e) {\r\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\r\n            .body(\"Compleye failed\");\r\n      }\r\n\r\n      return new ResponseEntity.ok(\"ì™„ë£Œ\");\r\n  }\r\n\r\n  @Data\r\n  @Builder\r\n  @NoArgsConstructor\r\n  @AllArgsConstructor\r\n  public class FileUploadCompleteRequest {\r\n          @Schema(description = \"uploadId\", name=\"uploadId\")\r\n          private String uploadId;\r\n\r\n          @Schema(description = \"fileSavePath\", name=\"fileSavePath\")\r\n          private String fileSavePath;\r\n\r\n          @Schema(description = \"parts\", name=\"parts\")\r\n          private List<UploadedPart> parts;\r\n  }\r\n\r\n  @Data\r\n  @Builder\r\n  @NoArgsConstructor\r\n  @AllArgsConstructor\r\n  public class UploadedPart {\r\n          @NotBlank\r\n          @Schema(description = \"partNumber\", name=\"partNumber\")\r\n          private int partNumber;\r\n\r\n          @JsonProperty(\"eTag\")\r\n          @Schema(description = \"eTag\", name=\"eTag\")\r\n          private String eTag;\r\n  }\r\n```\r\n\r\n> ì§ˆë¬¸\r\n>\r\n> Q1. Presigned URLì—ì„œ ì‚¬ìš©í•˜ëŠ” APIê°€ ì™œ ë‘ ê°œ ì¸ê°€ìš”?\r\n>\r\n> A1. '/api/upload/presigned-url/start' start apiì—ì„œëŠ” presigned-urlì„ í”„ë¡ íŠ¸ë¡œ ë³´ë‚´ëŠ” ì—­í• ì„ í•˜ê³ , '/api/upload/presigned-url/complete' complete apiì—ì„œëŠ” presigned urlì— ì˜¬ë¦° multipart íŒŒì¼ì´ ëª¨ë‘ ì˜¬ë¼ê°„ ê²½ìš° í•˜ë‚˜ì˜ íŒŒì¼ë¡œ í•©ì¹˜ëŠ” ê³¼ì •ì„ ì§„í–‰í•©ë‹ˆë‹¤.\r\n>\r\n> Q2. uploadId, partNumber, etag ì–˜ë„¤ë“¤ì€ ë­ì£ ??\r\n>\r\n> A2. uploadIdëŠ” S3ì— ì˜¬ë¦° íŒŒì¼ ì •ë³´ì˜ ê³ ìœ  ë²ˆí˜¸, partNumberëŠ” S3ì— ì˜¬ë¦° Multipart Fileì˜ ì¸ë±ìŠ¤ë²ˆí˜¸, eTagëŠ” S3ì—ì„œ ë³´ë‚´ì¤€ Multipart Fileì˜ ê³ ìœ  ë²ˆí˜¸ì…ë‹ˆë‹¤.\r\n>\r\n> Q3. í”„ë¡ íŠ¸ì—ì„œ eTagê°€ undefined ì˜¤ë¥˜ê°€ ë– ìš”!!!\r\n>\r\n> A3. multipart fileì„ ì—…ë¡œë“œì‹œ S3ìª½ì—ì„œ response headerì— eTagê°’ì„ ì¤ë‹ˆë‹¤.\r\n> ì´ ê²½ìš° ì œëŒ€ë¡œ ë°›ìœ¼ë ¤ë©´ S3 CORS ì„¤ì •ì„ í•´ì•¼í•©ë‹ˆë‹¤. AWS ì›¹ ì½˜ì†”ì— ë“¤ì–´ê°€ì„œ ê¶Œí•œ íƒ­ì„ ë“¤ì–´ê°€ CORSë¥¼ ìˆ˜ì •í•˜ëŠ” ë¶€ë¶„ì´ ìˆëŠ”ë°, ê¸°ë³¸ì ìœ¼ë¡œ \"AllowedHeaders\": [ \"*\" ], .... ë“±ì´ ë“¤ì–´ê°€ ìˆì„ê±°ì˜ˆìš”. ì´ê³³ì—ì„œ í¸ì§‘ì„ ì´ìš©í•´ \"ExposeHeaders\": [\"ETag\"] ë‚´ìš©ì„ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.\r\n>\r\n> Q4. ë°±ì—”ë“œ UploadedPart DTOì•ˆì— eTag ìœ„ì— ìˆëŠ” JsonProperty ì–´ë…¸í…Œì´ì…˜ì€ ë¬´ì—‡ì¸ê°€ìš”?\r\n>\r\n> A4. ìë°” ë¹ˆ ê·œì¹™ìœ¼ë¡œ ì¸í•´, ë‘ ë²ˆ ì§¸ ê¸€ìê°€ ëŒ€ë¬¸ìë¡œ ì˜¤ëŠ” ê²½ìš° ì œëŒ€ë¡œ ì¸ì‹í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ etagë¡œ ë°ì´í„°ê°€ ë“¤ì–´ì˜¨ê²ƒìœ¼ë¡œ íŒë‹¨í•´, í”„ë¡ íŠ¸ì—ì„œ eTagë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¸ë‹¤í•´ë„, ì„œë²„ì—ì„œëŠ” ì¸ì‹í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ eTagë¼ëŠ” 'ì´ë¦„ì˜ ë°ì´í„°ë‹¤!' ë¼ê³  í‘œí˜„í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì…ë‹ˆë‹¤.\r\n\r\n### 2. ì„œë²„ì— ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ multipartFile ì˜¬ë¦¬ëŠ” ë¡œì§\r\n\r\n#### React\r\n\r\në™ì‘ë°©ì‹\r\n\r\n1. í”„ë¡ íŠ¸ì—ì„œ íŒŒì¼ ì •ë³´ë¥¼ ë³´ë‚´ ë°±ì—”ë“œì—ì„œ Upload Idë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤.\r\n2. í”„ë¡ íŠ¸ì—ì„œ íŒŒì¼ì„ ì˜ë¼ Multipart Fileì„ ë°±ì—”ë“œì— ìŠ¤íŠ¸ë¦¬ë° í˜•íƒœë¡œ ì˜¬ë¦½ë‹ˆë‹¤.\r\n3. ë°±ì—”ë“œì—ì„œ ë°›ì€ Multipart Fileì„ S3ì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.\r\n4. S3ì— ë‹¤ ì˜¬ë¼ê°€ë©´, Multipart Fileì„ í•©ì¹  ìˆ˜ ìˆë„ë¡ í”„ë¡ íŠ¸ì—ì„œ ë°±ì—”ë“œë¡œ ìš”ì²­í•©ë‹ˆë‹¤.\r\n\r\n```javascript\r\nexport const FileUploader = forwardRef(props, ref) => {\r\n    const [files, setFiles] = useState<File[]>([]);\r\n\r\n    useImperativeHandle(ref, () => ({\r\n      saveFiles: () => onSaveFiles,\r\n    }))\r\n\r\n    const onSaveFiles = () => {\r\n      // 2. ì„œë²„ì— ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ multipartFile ì˜¬ë¦¬ëŠ” ë¡œì§\r\n\r\n      // ê° partë§ˆë‹¤ í¬ê¸° ì„¤ì • AWS S3ëŠ” ìµœì†Œ 5MB\r\n      const chunkSize = 10 * 1024 * 1024;\r\n\r\n      for (const file of files) {\r\n        await processUploadMultipartFileWithStreaming(file, chunkSize);\r\n      }\r\n\r\n      ...\r\n    }\r\n\r\n    // 2. ì„œë²„ì— ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ multipartFile ì˜¬ë¦¬ëŠ” ë¡œì§\r\n    async function processUploadMultipartFileWithStreaming(file: File, chunkSize: number) {\r\n      // ê° partë§ˆë‹¤ í¬ê¸° ì„¤ì • AWS S3ëŠ” ìµœì†Œ 5MB\r\n      const partCount = Math.ceil(file.size / chunkSize);\r\n      let uploadedSize = 0;\r\n\r\n      // 1. ì„œë²„ì— uploadId ìš”ì²­\r\n      const { uploadId, key } = await axios.get(\"/api/upload/server/start\", {\r\n        params: {\r\n          fileName: file.name,\r\n          fileType: file.type\r\n        },\r\n      });\r\n\r\n      const uploadedParts: { partNumber: number; eTag: string }[] = [];\r\n\r\n      // chunk íŒŒì¼ ì—…ë¡œë“œ ë¡œì§\r\n      const uploadChunk = async (i: number) => {\r\n        const start = i * chunkSize;\r\n        const end = Math.min(file.size, start + chunkSize);\r\n        const chunk = file.slice(start, end);\r\n\r\n        const formData = new FormData();\r\n        formData.append('uploadId', uploadId);\r\n        formData.append('key', key);\r\n        formData.append('chunk', blob);\r\n        formData.append('partNumber', String(i + 1));\r\n\r\n        const res = await axios.post(\"/api/upload/server/start\", formData, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\", // ìƒëµí•´ë„ ë¸Œë¼ìš°ì €ê°€ ì•Œì•„ì„œ ë„£ìŒ\r\n          },\r\n        });\r\n\r\n        uploadedParts[i] = res; // partNumber, eTag\r\n      };\r\n\r\n      await asyncPool(\r\n        10,\r\n        Array.from({ length: partCount }, (_, i) => i),\r\n        uploadChunk\r\n      );\r\n\r\n      // 4. ì™„ë£Œìš”ì²­\r\n      await await axios.post(\"/api/upload/server/complete\", {\r\n          uploadId: uploadId,\r\n          key: key,\r\n          parts: uploadedParts,\r\n          fileSize: String(file.size)\r\n        }\r\n      );\r\n    }\r\n\r\n    // ë¸Œë¼ìš°ì €ì—ì„œ ìš”ì²­í•˜ëŠ” api í˜¸ì¶œ ê°œìˆ˜ ì¡°ì ˆ\r\n    async function asyncPool<T, R>(\r\n      poolLimit: number,\r\n      array: T[],\r\n      iteratorFn: (item: T, index: number) => Promise<R>\r\n    ): Promise<R[]> {\r\n      const ret: R[] = [];\r\n      const executing: Promise<any>[] = [];\r\n\r\n      for (let i = 0; i < array.length; i++) {\r\n        const item = array[i];\r\n        const p = Promise.resolve().then(() => iteratorFn(item, i));\r\n\r\n        ret.push(p as any); // ê²°ê³¼ ë°°ì—´ì— ì¶”ê°€\r\n\r\n        // poolLimit ì´í•˜ë¡œë§Œ ì‹¤í–‰\r\n        if (poolLimit <= array.length) {\r\n          const e: Promise<any> = p.then(() => executing.splice(executing.indexOf(e), 1));\r\n          executing.push(e);\r\n          if (executing.length >= poolLimit) {\r\n            await Promise.race(executing); // ì œì¼ ë¨¼ì € ëë‚œ ì‘ì—… ê¸°ë‹¤ë¦¼\r\n          }\r\n        }\r\n      }\r\n\r\n      return Promise.all(ret); // ì „ì²´ ì™„ë£Œ ëŒ€ê¸°\r\n    }\r\n\r\n    return ...\r\n  }\r\n\r\n\r\n\r\n```\r\n\r\n```java\r\n\r\n  //Upload Id ìš”ì²­ API\r\n  @GetMapping(value = \"/api/upload/server/start\")\r\n  public ResponseEntity<FileUploadStartResponse> startMultipartUploadWithStreaming(\r\n          @RequestParam(\"fileName\") @NotBlank String fileName\r\n          , @RequestParam(\"fileType\") @NotBlank String fileType\r\n  ) {\r\n      // AWS SDK\r\n      AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n                    .withRegion(Regions.AP_NORTHEAST_2)\r\n                    .build();\r\n\r\n      // S3ì— ì €ì¥ë  í‚¤ ê°’(S3 ë‚´ì—ì„œëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë´ë„ ëœë‹¤.)\r\n      String key = \"upload/\" + UUID.randomUUID() + \"_\" + fileName;\r\n\r\n      ObjectMetadata metadata = new ObjectMetadata();\r\n      metadata.setContentType(fileType);\r\n\r\n      String uploadId = \"\";\r\n\r\n      try {\r\n        InitiateMultipartUploadRequest initRequest = new InitiateMultipartUploadRequest([s3 bucket ì£¼ì†Œ], key)\r\n                .withObjectMetadata(metadata);\r\n\r\n        uploadId = s3Client.initiateMultipartUpload(initRequest).getUploadId();\r\n      } catch (Exception e) {\r\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\r\n            .body(\"Presigned URL failed for file: \" + fileName + \". Error: \" + e.getMessage());\r\n      }\r\n\r\n      return ResponseEntity.ok(FileUploadStartResponse.builder()\r\n                .uploadId(uploadId)\r\n                .key(key)\r\n                .build()\r\n              );\r\n  }\r\n\r\n  @Data\r\n  @Builder\r\n  @NoArgsConstructor\r\n  @AllArgsConstructor\r\n  public class UploadedPart {\r\n          @NotBlank\r\n          @Schema(description = \"partNumber\", name=\"partNumber\")\r\n          private int partNumber;\r\n\r\n          @JsonProperty(\"eTag\")\r\n          private String eTag;\r\n  }\r\n\r\n  // Multipart File ì—…ë¡œë“œ API\r\n  @PostMapping(value = \"/api/upload/server/start\", produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public ResponseEntity<UploadedPart> uploadMultipartFilesWithStreaming(\r\n            @RequestParam(name = \"chunk\") MultipartFile chunk,\r\n            @RequestParam(name = \"key\") String key,\r\n            @RequestParam(name = \"uploadId\") String uploadId,\r\n            @RequestParam(name = \"partNumber\") int partNumber\r\n    ) throws IOException {\r\n\r\n        // AWS SDK\r\n        AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n                      .withRegion(Regions.AP_NORTHEAST_2)\r\n                      .build();\r\n        ObjectMetadata metadata = new ObjectMetadata();\r\n        metadata.setContentLength(chunk.getSize());\r\n        metadata.setContentType(chunk.getContentType());\r\n\r\n        UploadPartRequest partRequest = new UploadPartRequest()\r\n                .withBucketName([s3 bucket ì£¼ì†Œ])\r\n                .withKey(key)\r\n                .withUploadId(uploadId)\r\n                .withPartNumber(partNumber)\r\n                .withInputStream(chunk.getInputStream())\r\n                .withPartSize(chunk.getSize());\r\n\r\n        UploadPartResult partResult = s3Client.uploadPart(partRequest);\r\n\r\n        return ResponseEntity.ok(UploadedPart.builder()\r\n                .eTag(partResult.getETag())\r\n                .partNumber(partNumber)\r\n                .build()\r\n              );\r\n  }\r\n\r\n  // Multipart Fileì„ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ í•©ì¹˜ëŠ” API\r\n  @PostMapping(value = \"/api/upload/server/complete\")\r\n  public ResponseEntity<String> completeMultipartUpload(\r\n          @RequestBody FileUploadCompleteRequest fileUploadCompleteRequest\r\n          //uploadId, key, parts ì„¸ê°œë¥¼ ë°›ê³ ìˆê³ , partsëŠ” partNumberì™€ eTagë¥¼ ë°›ê³ ìˆìŠµë‹ˆë‹¤.\r\n  ) {\r\n      // AWS SDK\r\n      AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n                    .withRegion(Regions.AP_NORTHEAST_2)\r\n                    .build();\r\n\r\n      try {\r\n        List<PartETag> partETags = fileUploadCompleteRequest.getParts().stream()\r\n                .map(p -> new PartETag(p.getPartNumber(), p.getETag()))\r\n                .toList();\r\n\r\n        CompleteMultipartUploadRequest completeRequest = new CompleteMultipartUploadRequest(\r\n                [s3 bucket ì£¼ì†Œ],\r\n                fileUploadCompleteRequest.getKey(),\r\n                fileUploadCompleteRequest.getUploadId(),\r\n                partETags\r\n        );\r\n\r\n        s3Client.completeMultipartUpload(completeRequest);\r\n      } catch  (Exception e) {\r\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\r\n            .body(\"Complete failed\");\r\n      }\r\n\r\n      return new ResponseEntity.ok(\"ì™„ë£Œ\");\r\n  }\r\n\r\n  @Data\r\n  @Builder\r\n  @NoArgsConstructor\r\n  @AllArgsConstructor\r\n  public class FileUploadCompleteRequest {\r\n          @Schema(description = \"uploadId\", name=\"uploadId\")\r\n          private String uploadId;\r\n\r\n          @Schema(description = \"fileSavePath\", name=\"fileSavePath\")\r\n          private String fileSavePath;\r\n\r\n          @Schema(description = \"parts\", name=\"parts\")\r\n          private List<UploadedPart> parts;\r\n  }\r\n\r\n```\r\n\r\n### êµ¬í˜„ í›„ ì—…ë¡œë“œ ì†ë„ ë¹„êµ\r\n\r\n1. Presigned URL íŒŒì¼ ì—…ë¡œë“œ\r\n\r\n   1. ë‹¨ì¼\r\n      1. ê¸°ì¡´ : 50MB / 10ì´ˆ => ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 14ë¶„\r\n   2. Multipart File\r\n      1. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 2ë¶„\r\n\r\n2. ì„œë²„ì— íŒŒì¼ì„ ì˜¬ë ¤ì„œ S3ì— ì—…ë¡œë“œ\r\n   1. ë‹¨ì¼\r\n      1. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 18ì´ˆ, 100MB / 30ì´ˆ\r\n   2. Multipart File\r\n      1. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 18ì´ˆ, 100MB / 38ì´ˆ\r\n\r\nê²°ê³¼\r\n\r\n1. ë„¤íŠ¸ì›Œí¬ ë§ì´ ì¢‹ì§€ ì•Šì€ ê²½ìš° ì„œë²„ì— íŒŒì¼ì„ ì˜¬ë¦¬ëŠ”ê²Œ íšê¸°ì ìœ¼ë¡œ ë¹¨ëë‹¤.\r\n2. ì„œë²„ì— íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ S3ì— ì˜¬ë¦¬ëŠ” ê²½ìš°, ì˜¤íˆë ¤ Multipart Fileì„ ì´ìš©í•˜ë©´ ë” ëŠë¦¬ë‹¤.\r\n\r\n### ì´í›„ ë„¤íŠ¸ì›Œí¬ ë§ ì†ë„ ê°œì„  ëœ í›„ ì—…ë¡œë“œ ì†ë„\r\n\r\n1. Presigned URL íŒŒì¼ ì—…ë¡œë“œ\r\n\r\n   1. ë‹¨ì¼\r\n      1. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 14ë¶„\r\n      2. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  í›„ : 50MB / 14ì´ˆ, 100MB / 30ì´ˆ\r\n   2. Multipart File\r\n      1. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 2ë¶„\r\n      2. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  í›„ : 50MB / 4ì´ˆ, 100MB / 6ì´ˆ\r\n\r\n2. ì„œë²„ì— íŒŒì¼ì„ ì˜¬ë ¤ì„œ S3ì— ì—…ë¡œë“œ\r\n   1. ë‹¨ì¼\r\n      1. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 18ì´ˆ, 100MB / 30ì´ˆ\r\n      2. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  í›„ : 50MB / 18ì´ˆ, 100MB / 30ì´ˆ\r\n   2. Multipart File\r\n      1. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ : 50MB / 18ì´ˆ, 100MB / 38ì´ˆ\r\n      2. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  í›„ : 50MB / 18ì´ˆ, 100MB / 38ì´ˆ\r\n\r\n## ê²°ê³¼\r\n\r\n1. ë„¤íŠ¸ì›Œí¬ ë§ ê°œì„  ì „ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ S3 ì ‘ê·¼ ì†ë„ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ëŠë ¸ë‹¤. ê·¸ë˜ì„œ Multipartë¡œ íŒŒì¼ì„ ì—…ë¡œë“œ ì‹œì¼œë„ ì—„ì²­ë‚˜ê²Œ ì†ë„ê°€ ê°œì„ ì´ ë˜ì—ˆì§€ë§Œ, ì•„ì§ë„ ëŠë ¸ë‹¤.\r\n2. ì„œë²„ë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ”ê±´ ë„¤íŠ¸ì›Œí¬ ë§ì´ ëŠë ¤ì§„ ê³³ì— ê±°ì¹˜ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ íŒë‹¨ëœë‹¤. ê·¸ë˜ì„œ ë„¤íŠ¸ì›Œí¬ ë§ì´ ê°œì„ ë˜ê¸° ì „ê¹Œì§€ ì„œë²„ì— íŒŒì¼ì„ ì—…ë¡œë“œ ì‹œì¼œì„œ S3ì— ë„£ì„ ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.\r\n3. ë¬´ì¡°ê±´ Multipart Fileì´ ì¢‹ì§„ ì•Šì•˜ë‹¤. ì„œë²„ì— Multipart Fileì„ ì˜¬ë¦¬ëŠ” ê²½ìš° ë‹¨ì¼ë¡œ ì˜¬ë¦¬ëŠ” ê²ƒë³´ë‹¤ ì†ë„ê°€ ëŠë ¸ë‹¤.\r\n\r\n## ê³ ì´¬\r\n\r\n1. ë„¤íŠ¸ì›Œí¬ ë§ì´ ì•ˆì¢‹ì•˜ëŠ”ë° ì™œ ì„œë²„ë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ”ê±´ ë¹¨ëì„ê¹Œ?\r\n\r\n   í”„ë¡ íŠ¸ ì„œë²„ì™€ ë°±ì—”ë“œ ì„œë²„ ë‘˜ë‹¤ AWSì— ìˆë‹¤.\r\n\r\n   í´ë¼ì´ì–¸íŠ¸ => ë¬´ìˆ˜íˆ ë§ì€ ë°©í™”ë²½ => ë°±ì—”ë“œ\r\n\r\n   ì•„ë§ˆ ë‚´ ì˜ˆìƒìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ ì´ìŠˆê°€ AWS ì„œë²„ê¹Œì§€ê°€ ì•„ë‹ˆê³  AWS S3 ì„œë²„ê¹Œì§€ì—ì„œ ì´ìŠˆê°€ ìˆì—ˆë˜ ê²ƒìœ¼ë¡œ íŒë‹¨ëœë‹¤. ê·¸ë˜ì„œ í´ë¼ì´ì–¸íŠ¸ì— AWS ì„œë²„ë¡œ íŒŒì¼ì´ ì˜¬ë¼ê°€ëŠ”ê±´ ì •ìƒì ì¸ ì†ë„ê°€ ë‚˜ì™”ê³ , AWS ì„œë²„ì™€ S3 ì„œë²„ ë¼ë¦¬ë„ ì†ë„ê°€ ë¹¨ëë˜ê²ƒ ê°™ë‹¤.\r\n\r\n2. Multipart Fileë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ê²½ìš° ì†ë„ê°€ ìë¥¸ íŒŒì¼ ê°œìˆ˜ë§Œí¼ ë¹¨ë¼ì§ˆ ê²ƒì´ë¼ íŒë‹¨í–ˆìœ¼ë‚˜ ê·¸ë ‡ì§€ ì•Šì•˜ë‹¤. ê·¸ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ?\r\n\r\n   ë¸Œë¼ìš°ì €ì—ì„œ APIì„ í˜¸ì¶œí•  ë•Œ 100MBë©´ 10MBë‹¨ìœ„ë¡œ ì˜ëê¸° ë•Œë¬¸ì— 10ë²ˆì˜ ìš”ì²­ì„ ë³´ëƒˆë‹¤. ê° ìš”ì²­ë§ˆë‹¤ ì„œë²„ê°€ ê°ë‹¹í•˜ì§€ ëª»í•˜ê³ , ëŠë¦¬ê²Œ ì²˜ë¦¬ëœ ê²ƒì´ë‹¤. ê·¸ëŸ¼ ì™œ ì„œë²„ê°€ ê°ë‹¹í•˜ì§€ ëª»í–ˆëƒë©´? MultipartFileì€ ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ì´ ì‚¬ì‹¤ ì•„ë‹ˆì—ˆê¸° ë•Œë¬¸... MultipartFileì„ InputSrteamìœ¼ë¡œ ë°”ê¾¸ì—ˆìœ¼ë©´ ì¡°ê¸ˆ ë‹¬ë¼ì§€ì§€ ì•Šì•˜ì„ê¹Œ í•œë‹¤.\r\n"},{"excerpt":"ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½ React v18 AWS SDK for Java1.x ë°°ê²½ íŒŒì¼ ì €ì¥ì†Œê°€ ë³€ê²½ë˜ì–´ S3ì— íŒŒì¼ ì—…ë¡œë“œë¥¼ êµ¬ì¶•í•˜ë ¤í•œë‹¤. ëª©í‘œ ë‚´ë¶€ ìŠ¤í† ë¦¬ì§€ì— íŒŒì¼ ì—…ë¡œë“œ í•˜ëŠ” ê²½ìš° í”„ë¡ íŠ¸ì—ì„œ ë°±ì—”ë“œë¡œ íŒŒì¼ì„ ì—…ë¡œë“œí•œë‹¤. ë³´í†µ ë³´ì•ˆì„ ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìŠ¤í† ë¦¬ì§€ ì ‘ê·¼ì„ ë§‰ê±°ë‚˜, ì„œë²„ ì•ˆì— íŒŒì¼ì„ ì ì¬í•˜â€¦","fields":{"slug":"/posts/springboot/presined-url/"},"frontmatter":{"date":"April 18, 2025","title":"SpringBoot, React, S3 Presigned URLì„ ì´ìš©í•˜ì—¬ íŒŒì¼ ì—…ë¡œë“œë¥¼ í•´ë³´ì","tags":["react","springboot"],"emoji":"ğŸš€","series":"SpringBoot"},"rawMarkdownBody":"\r\n# ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì\r\n\r\n## ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½\r\n\r\n> React v18\r\n>\r\n> AWS SDK for Java1.x\r\n\r\n## ë°°ê²½\r\n\r\níŒŒì¼ ì €ì¥ì†Œê°€ ë³€ê²½ë˜ì–´ S3ì— íŒŒì¼ ì—…ë¡œë“œë¥¼ êµ¬ì¶•í•˜ë ¤í•œë‹¤.\r\n\r\n## ëª©í‘œ\r\n\r\në‚´ë¶€ ìŠ¤í† ë¦¬ì§€ì— íŒŒì¼ ì—…ë¡œë“œ í•˜ëŠ” ê²½ìš° í”„ë¡ íŠ¸ì—ì„œ ë°±ì—”ë“œë¡œ íŒŒì¼ì„ ì—…ë¡œë“œí•œë‹¤.\r\n\r\në³´í†µ ë³´ì•ˆì„ ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìŠ¤í† ë¦¬ì§€ ì ‘ê·¼ì„ ë§‰ê±°ë‚˜, ì„œë²„ ì•ˆì— íŒŒì¼ì„ ì ì¬í•˜ëŠ” ê²½ìš°ê°€ ìˆê¸° ë•Œë¬¸ì´ë‹¤.\r\n\r\nê·¸ë˜ì„œ í”„ë¡ íŠ¸ì—ì„œ ë°±ì—”ë“œë¡œ íŒŒì¼ì„ ìŠ¤íŠ¸ë¦¬ë° í˜•ì‹ìœ¼ë¡œ ì—…ë¡œë“œí•˜ê³  S3ì— ì—…ë¡œë“œ í•˜ëŠ” ë°©ë²•ê³¼ AWS S3ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì„œë²„ë¥¼ ê±°ì¹˜ì§€ ì•Šê³  Presigned URLì„ ì´ìš©í•˜ì—¬ AWS S3ì— íŒŒì¼ì„ ì˜¬ë¦¬ë ¤ í•œë‹¤.\r\n\r\n1. í”„ë¡ íŠ¸ì—ì„œ ìŠ¤íŠ¸ë¦¬ë° í˜•ì‹ìœ¼ë¡œ ë°±ì—”ë“œë¡œ íŒŒì¼ì„ S3ì— ì—…ë¡œë“œí•˜ëŠ” ë°©ë²•\r\n\r\n   ìë°”ì—ì„œ íŒŒì¼ì„ ë‹¤ë£¨ëŠ” ê²½ìš° íŒŒì¼ ìì²´ê°€ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ê¸° ë•Œë¬¸ì— OOMì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤.\r\n   ê·¸ë˜ì„œ ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ì„ í†µí•´ ë©”ëª¨ë¦¬ ë¶€ë‹´ ì—†ì´ íŒŒì¼ì„ ì˜¬ë ¤ë³´ë„ë¡ í•˜ì\r\n\r\n2. í”„ë¡ íŠ¸ì—ì„œ AWS S3 Presigned URLì„ ì´ìš©í•˜ì—¬ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ëŠ” ë°©ë²•\r\n\r\n## êµ¬í˜„\r\n\r\n### 1. í”„ë¡ íŠ¸ì—ì„œ ìŠ¤íŠ¸ë¦¬ë° í˜•ì‹ìœ¼ë¡œ ë°±ì—”ë“œë¡œ íŒŒì¼ì„ S3ì— ì—…ë¡œë“œí•˜ëŠ” ë°©ë²•\r\n\r\n```javascript\r\n  export const FileUploader = forwardRef(props, ref) => {\r\n    const [files, setFiles] = useState<File[]>([]);\r\n\r\n    useImperativeHandle(ref, () => ({\r\n      saveFiles: () => onSaveFiles,\r\n    }))\r\n\r\n    const onSaveFiles = () => {\r\n      // 1. ì„œë²„ì— ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ fileì„ ì˜¬ë¦¬ëŠ” ë¡œì§\r\n      await processUploadFilesWithStreaming(files);\r\n    }\r\n\r\n    // 1. ì„œë²„ì— ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ fileì„ ì˜¬ë¦¬ëŠ” ë¡œì§\r\n    async function processUploadFilesWithStreaming(newFiles: File[]) {\r\n      const formData = new FormData();\r\n      Array.from(newFiles).forEach((file) => {\r\n        formData.append('files', file); // filesëŠ” ì„œë²„ì—ì„œ List<MultipartFile>ë¡œ ë°›ìŒ\r\n      });\r\n\r\n      await axios.post(\"/api/upload\", formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\", // ìƒëµí•´ë„ ë¸Œë¼ìš°ì €ê°€ ì•Œì•„ì„œ ë„£ìŒ\r\n        },\r\n      });\r\n    }\r\n\r\n    return ...\r\n  }\r\n```\r\n\r\n```java\r\n  @PostMapping(\"/api/upload/server\")\r\n  public ResponseEntity<?> uploadFilesS3(@RequestParam(\"files\") MultipartFile[] files) {\r\n    for (MultipartFile file : files) {\r\n      try {\r\n        // S3ì— ì €ì¥ë  í‚¤ ê°’(S3 ë‚´ì—ì„œëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë´ë„ ëœë‹¤.)\r\n        String key = \"upload/\" + UUID.randomUUID() + \"_\" + file.getOriginalFileName();\r\n\r\n        // file.getInputStream()ìœ¼ë¡œ ì ‘ê·¼ì‹œ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ì§€ ì•Šê³  ìŠ¤íŠ¸ë¦¬ë° í˜•ì‹ìœ¼ë¡œ ë™ì‘\r\n        // ë§Œì•½ byte[], file.transferTo() ê°™ì€ ê²½ìš°ëŠ” Heapì— ì˜¬ë ¤ì„œ ë²„í¼ë§í•˜ê¸° ë•Œë¬¸ì— ì§€ì–‘í•´ì•¼í•¨.\r\n        InputStream inputStream = file.getInputStream();\r\n        ObjectMetadata metadata = new ObjectMetadata();\r\n        metadata.setContentType(file.getContentType());\r\n        metadata.setContentLength(file.getSize());\r\n\r\n\r\n        AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n                    .withRegion(Regions.AP_NORTHEAST_2)\r\n                    .build();\r\n\r\n        // S3ì— MultiFileì„ ì˜¬ë¦¬ëŠ” í•¨ìˆ˜\r\n        s3Client.putObject(new PutObjectRequest([s3 bucket ì£¼ì†Œ], key, inputStream, metadata));\r\n\r\n      } catch (Exception e) {\r\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\r\n            .body(\"Upload failed for file: \" + file.getOriginalFilename());\r\n      }\r\n    }\r\n\r\n    return ResponseEntity.ok(\"ì—…ë¡œë“œ ì„±ê³µ\");\r\n  }\r\n```\r\n\r\n> ì§ˆë¬¸\r\n> Q1. ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ì´ ë¬´ì—‡ì¸ê°€ìš”?\r\n>\r\n> A1. ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì²˜ë¦¬í•˜ì§€ ì•Šê³ , ì¼ì • ë‹¨ìœ„ë¡œ ëŠì–´ì„œ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹. EKS ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ì ê²Œ í• ë‹¹í•˜ëŠ” ì‹œìŠ¤í…œì¸ ê²½ìš° íŒŒì¼ì„ ì²˜ë¦¬í•  ë•Œ ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ì„ ì´ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, íŒŒì¼ ê°ì²´ë¥¼ ë©”ëª¨ë¦¬ë¥¼ ê·¸ëŒ€ë¡œ ë‹´ê¸° ë•Œë¬¸ì— OOMì´ ì¼ì–´ë‚  ìˆ˜ ìˆìŒ.\r\n>\r\n> Q2. POSTë¡œ bodyì— ë‹´ì•„ ë³´ëƒˆëŠ”ë° ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” @RequestParamìœ¼ë¡œ ë°›ë‚˜ìš”? @RequestBodyê°€ ì•„ë‹Œê°€ìš”?\r\n>\r\n> A2. í”„ë¡ íŠ¸ì—ì„œ FormDataë¥¼ ë³´ë‚´ëŠ” ê²½ìš°, FormDataëŠ” ë¸Œë¼ìš°ì €ì—ì„œ Content-Typeì„ ê¸°ë³¸ì ìœ¼ë¡œ multipart/form-dataí˜•ì‹ìœ¼ë¡œ ë³´ë‚´ê¸° ë•Œë¬¸ì—, ìŠ¤í”„ë§ì€ @RequestParamìœ¼ë¡œ ë°›ì•„ì•¼ í•¨. ì¦‰, Content-Type ë•Œë¬¸ì´ë‹¤.\r\n\r\n### 2. Presigned Urlë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ë°©ë²•\r\n\r\n```javascript\r\n  export const FileUploader = forwardRef(props, ref) => {\r\n    const [files, setFiles] = useState<File[]>([]);\r\n\r\n    useImperativeHandle(ref, () => ({\r\n      saveFiles: () => onSaveFiles,\r\n    }))\r\n\r\n    const onSaveFiles = () => {\r\n      // 2. presigned Urlë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ë¡œì§\r\n      await processUploadFilesWithPresignedUrl(files);\r\n    }\r\n\r\n    // 2. presigned Urlë¡œ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ë¡œì§\r\n    async function processUploadFilesWithPresignedUrl(newFiles: File[]) {\r\n      const fileSizeArr: number[] = [];\r\n      const fileNameArr: String[] = [];\r\n      const fileTypeArr: String[] = [];\r\n\r\n      Array.from(newFiles).forEach((file) => {\r\n        fileSizeArr.push(file.size);\r\n        fileNameArr.push(file.name);\r\n        fileTypeArr.push(file.type);\r\n      })\r\n\r\n      // Presigned URLì„ íŒŒì¼ ì •ë³´ë“¤ì„ ë³´ë‚´ì„œ ì„œë²„ì—ì„œ ê°€ì ¸ì˜´\r\n      const preSignedUrlResponse = await axios.get(\"/api/upload/presigned-url\", {\r\n        params: {\r\n          fileSizeList: fileSizeArr,\r\n          fileNameList: fileNameArr,\r\n          fileTypeList: fileTypeArr\r\n        },\r\n      });\r\n\r\n      if (preSignedUrlResponse) {\r\n        // PreSigned URLê°€ì§€ê³  ê° íŒŒì¼ ì—…ë¡œë“œ\r\n        for (const idx in preSignedUrlResponse) {\r\n          await axios.put(preSignedUrlResponse[idx].preSignedUrl, newFiles[idx], {\r\n            headers: {\r\n              'Content-Type': newFiles[idx].type,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return ...\r\n  }\r\n```\r\n\r\n```java\r\n  @PostMapping(\"/api/upload/presigned-url\")\r\n  public ResponseEntity<List<String>> getPresignedUrl (\r\n    @RequestParam(\"fileSizeList\") List<int> fileSizeList,\r\n    @RequestParam(\"fileNameList\") List<String> fileNameList,\r\n    @RequestParam(\"fileTypeList\") List<String> fileTypeList\r\n  ) {\r\n    List<Strng> presginedUrlList = new ArrayList<>();\r\n\r\n    for (int i = 0; i < fileNameList.size(); i++) {\r\n      try {\r\n        int fileSize = fileSizeList.get(i);\r\n        String fileType = fileTypeList.get(i);\r\n\r\n        // S3ì— ì €ì¥ë  í‚¤ ê°’(S3 ë‚´ì—ì„œëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë´ë„ ëœë‹¤.)\r\n        String key = \"upload/\" + UUID.randomUUID() + \"_\" + fileNameList.get(i);\r\n\r\n        // AWS SDK\r\n        AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n                      .withRegion(Regions.AP_NORTHEAST_2)\r\n                      .build();\r\n\r\n        // Pre-Signed URL ë§Œë£Œ ì‹œê°„ (60ë¶„ í›„)\r\n        Date expiration = new Date();\r\n        long expTimeMillis = expiration.getTime();\r\n        // 10ë¶„ í›„ ë§Œë£Œ\r\n        expTimeMillis += TimeUnit.MINUTES.toMillis(10);\r\n        expiration.setTime(expTimeMillis);\r\n\r\n        // PUT Pre-Signed URL (PUT)\r\n        GeneratePresignedUrlRequest generatePresignedUrlRequest =\r\n                new GeneratePresignedUrlRequest([s3 bucket ì£¼ì†Œ], key)\r\n                        .withMethod(HttpMethod.PUT)\r\n                        .withContentType(fileType)\r\n                        .withExpiration(expiration);\r\n\r\n        URL url = s3Client.generatePresignedUrl(generatePresignedUrlRequest);\r\n        presginedUrlList.add(url.toString());\r\n\r\n      } catch (Exception e) {\r\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\r\n            .body(\"Presigned URL failed for file: \" + fileNameList.get(i) + \". Error: \" + e.getMessage());\r\n      }\r\n    }\r\n\r\n    return ResponseEntity.ok(presginedUrlList);\r\n  }\r\n```\r\n\r\n> ì§ˆë¬¸\r\n> Q1. Presigned URLì„ ì™œ ì‚¬ìš©í•˜ë‚˜ìš”?\r\n>\r\n> A1. ì„œë²„ì— íŒŒì¼ì„ ì˜¬ë¦¬ì§€ ì•Šê³  S3ì— ì§ì ‘ íŒŒì¼ì„ ì˜¬ë¦´ ìˆ˜ ìˆì–´, ì„œë²„ ë¶€ë‹´ì„ í˜„ì €íˆ ì¤„í ìˆ˜ ìˆìŒ\r\n>\r\n> Q2. ë³´ì•ˆì—ëŠ” ì•ˆì¢‹ì§€ ì•Šì„ê¹Œìš”?\r\n>\r\n> A2. ë¬¼ë¡  Presigned URLì´ ìœ ì¶œë˜ë©´ ì¢‹ì§„ ì•Šì§€ë§Œ, HTTPSë¡œ URLì„ ë°›ì•„ ì‚¬ìš©í•˜ê³ , ìœ íš¨ê¸°ê°„ì„ ì„¤ì •í•˜ì—¬ì„œ ì“°ê¸° ë•Œë¬¸ì— ì ì ˆí•˜ê²Œ ì“°ë©´ ê´œì°®ë‹¤. ë¬¼ë¡  CORS ì„¤ì •ìœ¼ë¡œ ì›í•˜ëŠ” URLì—ì„œë§Œ ë“¤ì–´ì˜¤ê²Œ í•˜ë©´ ë³´ì•ˆ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.\r\n\r\n## ê²°ê³¼\r\n\r\nê°„ë‹¨í•œ í˜•íƒœì˜ ì„œë²„ ì—…ë¡œë“œì™€ Presigned URL ì—…ë¡œë“œë¥¼ í•´ë´¤ë‹¤. AWS S3ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê°„ë‹¨í•œ ë°©ì‹ìœ¼ë¡œ ì„œë²„ì— ë¶€ë‹´ ì—†ê²Œ íŒŒì¼ ì—…ë¡œë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.\r\n\r\n## ê³ ì´¬\r\n\r\níŒŒì¼ ì—…ë¡œë“œë¥¼ ì„œë²„ê°€ ë§¡ì§€ ì•Šê³ , í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë§¡ê¸°ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì—, AWS S3ê°€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì ‘ê·¼ì´ ë˜ì–´ì•¼ í•œë‹¤ëŠ”ì .\r\n\r\nAWS S3 ì ‘ê·¼ì´ ì–´ë µê±°ë‚˜, AWS ì ‘ê·¼ ë§ ì†ë„ê°€ ëŠë¦¬ë©´ íŒŒì¼ì—…ë¡œë“œê°€ ëŠë¦° ì¼ì´ ìƒê¸´ë‹¤.\r\n\r\nì‹¤ì œë¡œ ìš´ì˜í•˜ëŠ” ì‹œìŠ¤í…œì—ì„œ ìƒê¸´ ì¼ì´ê¸° ë•Œë¬¸ì— ë‹¤ìŒ ê¸€ì€ íŒŒì¼ ì—…ë¡œë“œ ì†ë„ ê°œì„  ì‘ì—…ì— ëŒ€í•´ ì‘ì„±í•  ê²ƒì´ë‹¤.\r\n\r\níŒŒì¼ ì—…ë¡œë“œë¥¼ ë„¤ ê°€ì§€ ë°©ë²•ì„ ë¹„êµí•´ë³¼ ê²ƒì´ë‹¤.\r\n"},{"excerpt":"ë°°ê²½  ë§¥ì—ì„œ êµ¬ì¶•ëœ í”„ë¡ íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ìœˆë„ìš°ì—ì„œ ì¼°ì„ ë•Œ ë³´í†µ ë³´ì´ëŠ” ì‚¬ì§„ì´ë‹¤. ì „ì²´ í™”ë©´ì— ë¹¨ê°›ê²Œ ì˜¤ë¥˜ë¡œ ë‚˜ì˜¤ë‹ˆ ì •ì‹  ë‚˜ê°ˆ ê²ƒ ê°™ë‹¤. ë¬¸ì œì •ì˜ CRLFì™€ LFê°€ ë¬´ì—‡ì¸ê°€? ì¤„ë°”ê¿ˆ ë°©ì‹ì˜ ì°¨ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. ìœˆë„ìš°ëŠ” , ë§¥, ë¦¬ëˆ…ìŠ¤ëŠ”  ìœ¼ë¡œ ì¤„ë°”ê¿ˆ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤. ê·¸ë˜ì„œ ìœˆë„ìš°ëŠ”  +  ==  +  ë¡œ í‘œì‹œí•˜ëŠ” ê²ƒì´ê³ , ë§¥ê³¼ ë¦¬ëˆ…ìŠ¤ëŠ”  ==  ìœ¼â€¦","fields":{"slug":"/posts/react/crlf/"},"frontmatter":{"date":"April 06, 2025","title":"CRLF LF","tags":["CRLF","LF"],"emoji":"ğŸš€","series":"React"},"rawMarkdownBody":"\r\n## ë°°ê²½\r\n\r\n![CRLF error](./../../../images/react/crlf-error-screenshot.png)\r\n\r\në§¥ì—ì„œ êµ¬ì¶•ëœ í”„ë¡ íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ìœˆë„ìš°ì—ì„œ ì¼°ì„ ë•Œ ë³´í†µ ë³´ì´ëŠ” ì‚¬ì§„ì´ë‹¤.\r\n\r\nì „ì²´ í™”ë©´ì— ë¹¨ê°›ê²Œ ì˜¤ë¥˜ë¡œ ë‚˜ì˜¤ë‹ˆ ì •ì‹  ë‚˜ê°ˆ ê²ƒ ê°™ë‹¤.\r\n\r\n## ë¬¸ì œì •ì˜\r\n\r\n### CRLFì™€ LFê°€ ë¬´ì—‡ì¸ê°€?\r\n\r\nì¤„ë°”ê¿ˆ ë°©ì‹ì˜ ì°¨ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.\r\n\r\nìœˆë„ìš°ëŠ” `/r/n`, ë§¥, ë¦¬ëˆ…ìŠ¤ëŠ” `\\n` ìœ¼ë¡œ ì¤„ë°”ê¿ˆ ì²˜ë¦¬ë¥¼ ì§„í–‰í•œë‹¤.\r\n\r\nê·¸ë˜ì„œ ìœˆë„ìš°ëŠ” `CR` + `LF` == `\\r` + `\\n` ë¡œ í‘œì‹œí•˜ëŠ” ê²ƒì´ê³ ,\r\n\r\në§¥ê³¼ ë¦¬ëˆ…ìŠ¤ëŠ” `LF` == `\\n` ìœ¼ë¡œ í‘œê¸°í•˜ëŠ” ê²ƒì´ë‹¤.\r\n\r\n> ì¤„ë°”ê¿ˆ, line break, EOL(End Of Line)\r\n\r\n### ì™œ ì´ëŸ° ì¼ì´ ì¼ì–´ë‚¬ì„ê¹Œ?\r\n\r\në‚˜ëŠ” ìœˆë„ìš°ì—ì„œ ì´ í”„ë¡œì íŠ¸ë¥¼ ê¹ƒìœ¼ë¡œ ë°›ì•„ vs codeë¡œ ì¼°ë‹¤.\r\n\r\nê·¸ëŸ¬ë‚˜ ì´ í”„ë¡œì íŠ¸ëŠ” ë§¥ì—ì„œ ë§Œë“¤ì–´ì§„ í”„ë¡œì íŠ¸ì˜€ì§€ë§Œ, ê¹ƒì— ì˜¬ë ¸ì„ ë•Œ `LF` í˜•ì‹ìœ¼ë¡œ ì˜¬ë¦¬ì§€ ì•Šì•„ì„œ ìƒê¸´ ì´ìŠˆë¡œ íŒë‹¨ëœë‹¤.\r\n\r\n### ì € ì—ëŸ¬ëŠ” ì–´ë””ì„œ ë‚´ë±‰ëŠ” ê±¸ê¹Œ?\r\n\r\nì´ ì—ëŸ¬ëŠ” `eslint`ì—ì„œ ë‚´ë±‰ëŠ” ê²ƒì´ë‹¤. ê·¸ë˜ì„œ `.eslintrc.cjs` íŒŒì¼ì„ ì—´ì–´ ì„¤ì • ì¤‘ `linebreak-style` ë‚´ìš©ì„ í™•ì¸í•´ë³´ì.\r\n\r\n```\r\n{\r\n  'linebreak-style': ['error', 'unix']\r\n}\r\n```\r\n\r\n### CRLFì™€ LF ì¤‘ ë¬´ì—‡ì„ ì„ íƒí•´ì•¼í•˜ëŠ”ê°€?\r\n\r\nê°€ì¥ ê³ ë¯¼ë˜ëŠ” ì‚¬ì‹¤ì¼ ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜ ì •ë‹µì€ ê±°ì˜ ì •í•´ì ¸ìˆë‹¤.\r\n\r\n1. `\\r\\n`ê³¼ `\\n`ì€ ë°”ì´íŠ¸ í¬ê¸° ì°¨ì´ê°€ ìˆë‹¤.\r\n2. ë¦¬ëˆ…ìŠ¤ë‚˜ ë§¥ì—ì„œ `\\r`ì€ ì¤„ë°”ê¿ˆ ì˜¤ë¥˜ë¡œ ì‹¤í–‰ëœë‹¤.\r\n3. `LF`ëŠ” í‘œì¤€ì´ë‹¤.\r\n\r\nì¦‰, LFë¥¼ ì‚¬ìš©í•˜ì.\r\n\r\n## í–‰ë™\r\n\r\n### CRLFë¥¼ LFë¡œ ë³€ê²½í•˜ì\r\n\r\n- Prettierë¥¼ ì´ìš©í•˜ì—¬ ì „ì²´ íŒŒì¼ì˜ `CRLF`ë¥¼ `LF`ë¡œ ë³€ê²½ì‹œí‚¬ ê²ƒì´ë‹¤.\r\n\r\n1. Prettier ì„¤ì¹˜ í™•ì¸\r\n\r\n   ```sh\r\n   npx prettier -v\r\n   ```\r\n\r\n2. ë²„ì „ì´ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´, Prettier ì„¤ì¹˜\r\n\r\n   ```sh\r\n    npx install --save-dev prettier\r\n   ```\r\n\r\n3. .prettierrc íŒŒì¼ ìƒì„±, LF ì„¤ì • ì ìš©\r\n\r\n   ```json\r\n   {\r\n     \"endOfLine\": \"lf\"\r\n   }\r\n   ```\r\n\r\n4. ì„¤ì¹˜í•œ Prettierë¥¼ ì´ìš©í•˜ì—¬ ëª¨ë“  íŒŒì¼ì„ ì ìš©í•œë‹¤.\r\n\r\n   ```sh\r\n   npx prettier --write .\r\n   ```\r\n\r\n![LF error](./../../../images/react/lf-screenshot.png)\r\n\r\n### ì˜ˆë°©ë°©ë²•\r\n\r\n1. VSCode ì„¤ì •\r\n\r\nVSCode ì„¤ì •(crtl + ,)ìœ¼ë¡œ ë“¤ì–´ê°€ eolì„ ê²€ìƒ‰í•œë‹¤.\r\n\r\n![VSCode EOL ì„¤ì •](./../../../images/react/vscode-eol-screenshot.png)\r\n\r\nì´ê³³ì—ì„œ `\\n`ìœ¼ë¡œ ê¸°ë³¸ê°’ì„ ë³€ê²½í•œë‹¤.\r\n\r\n2. Git ì»¤ë°‹ ì„¤ì •\r\n\r\n```sh\r\n  git config --global core.autocrlf false\r\n  git config --global core.eol lf\r\n```\r\n\r\n## ê²°ê³¼\r\n\r\nCRLFì™€ LFì˜ ì°¨ì´ë¥¼ ì•Œê³  í•œêº¼ë²ˆì— ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ê³¼ ì˜ˆë°© ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ë‹¤~\r\n"},{"excerpt":"ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½ React v18 ë°°ê²½ ìš”ì²­ì‚¬í•­ìœ¼ë¡œ í˜ì´ì§€ ë‚´ì—ì„œ ìˆ˜ì •ì´ ì¼ì–´ë‚œ ê²½ìš° URLì„ ì´ë™í•˜ë ¤ê³  í•  ì‹œ confirm ì°½ì„ ë„ì›Œ ì •ë§ ì´ë™í•˜ê³  ì‹¶ì€ê±´ì§€ ë¬¼ì–´ë³´ëŠ” ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤ê³  í•œë‹¤. ë¦¬ì•¡íŠ¸ì—ì„œ ì œê³µí•´ì£¼ëŠ” ë°©ì‹ì´ ì—†ê¸° ë•Œë¬¸ì— ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³ ì í•œë‹¤. ëª©í‘œ ë¦¬ì•¡íŠ¸ì—ì„œ URLì„ ì´ë™í•  ìˆ˜ ìˆâ€¦","fields":{"slug":"/posts/react/react-prevent-navigate/"},"frontmatter":{"date":"April 02, 2025","title":"ë¦¬ì•¡íŠ¸ì—ì„œ ë’¤ë¡œê°€ê¸°, ìƒˆë¡œê³ ì¹¨, í˜ì´ì§€ ì´ë™ì„ ê°ì§€í•´ë³´ì","tags":["react"],"emoji":"ğŸš€","series":"React"},"rawMarkdownBody":"\r\n# ë¦¬ì•¡íŠ¸ì—ì„œ URL ì´ë™ì‹œ ê°ì§€í•˜ì—¬ ì›í•˜ëŠ” ë¡œì§ì„ ë„£ì–´ë³´ì\r\n\r\n## ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½\r\n\r\n> React v18\r\n\r\n## ë°°ê²½\r\n\r\nìš”ì²­ì‚¬í•­ìœ¼ë¡œ í˜ì´ì§€ ë‚´ì—ì„œ ìˆ˜ì •ì´ ì¼ì–´ë‚œ ê²½ìš° URLì„ ì´ë™í•˜ë ¤ê³  í•  ì‹œ confirm ì°½ì„ ë„ì›Œ ì •ë§ ì´ë™í•˜ê³  ì‹¶ì€ê±´ì§€ ë¬¼ì–´ë³´ëŠ” ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤ê³  í•œë‹¤.\r\n\r\në¦¬ì•¡íŠ¸ì—ì„œ ì œê³µí•´ì£¼ëŠ” ë°©ì‹ì´ ì—†ê¸° ë•Œë¬¸ì— ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³ ì í•œë‹¤.\r\n\r\n## ëª©í‘œ\r\n\r\në¦¬ì•¡íŠ¸ì—ì„œ URLì„ ì´ë™í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ `Link ì»´í¬ë„ŒíŠ¸`, `useNavigate`, ë’¤ë¡œê°€ê¸°, ìƒˆë¡œê³ ì¹¨, ì•ìœ¼ë¡œê°€ê¸°ê°€ ìˆë‹¤.\r\n\r\n1. ì œì–´ê°€ ì•ˆë˜ëŠ” `useNavigate` í›…ê³¼ `Link` ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ í•  ê²ƒ\r\n2. ë’¤ë¡œê°€ê¸°ì™€ ìƒˆë¡œê³ ì¹¨ì˜ ê²½ìš° ë¸Œë¼ìš°ì €ì˜ ì´ë²¤íŠ¸ë¥¼ ì´ìš©í•˜ì—¬ ë§‰ì„ ê²ƒ\r\n\r\n## ê¸°ëŠ¥ ì¶”ê°€\r\n\r\n1. ë’¤ë¡œê°€ê¸°, ìƒˆë¡œê³ ì¹¨ ì´ë²¤íŠ¸ ì„¤ì •\r\n\r\n   ë’¤ë¡œê°€ê¸°ì™€ ìƒˆë¡œê³ ì¹¨ì„ ë§‰ê³ ì í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì— ì»¤ìŠ¤í…€ í›…ì„ ë„£ì–´ì¤˜ì„œ ë™ì‘ì„ ì œì–´í•´ë³´ì.\r\n\r\n   ```javascript\r\n   //usePreventRefresh.ts\r\n   export const usePreventPageExit = () => {\r\n    const navigate = useNavigate();\r\n    const isModified =\r\n    /* ì´ê³³ì—ëŠ” isModifiedë¥¼ ì „ì—­ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì´ìš©í•œë‹¤.\r\n     * ìƒíƒœê°’ë³´ë‹¨ ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ì¼ìœ¼í‚¤ì§€ ì•ŠëŠ” useRef ê°ì²´ë¥¼ ì´ìš©ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.\r\n     */\r\n\r\n    // ìƒˆë¡œê³ ì¹¨ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜\r\n    // ìƒˆë¡œê³ ì¹¨ì‹œ ì´ë²¤íŠ¸ë¥¼ ë§‰ëŠ”ë‹¤ë©´, ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì •í•´ë†“ì€ confirm ì°½ì´ ëœ¬ë‹¤.\r\n    const handleBeforeunload = (event) => {\r\n      if (isModified) {\r\n        event.preventDefault();\r\n        event.returnValue = '';\r\n      }\r\n    }\r\n\r\n    // ë’¤ë¡œê°€ê¸° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜\r\n    /* ë°©ì‹\r\n     * 1. ì²« í™”ë©´ ë Œë”ë§ì‹œ windowì˜ history ê°ì²´ì— í˜„ì¬ ì£¼ì†Œë¡œëœ ì´ë ¥ì„ ë„£ëŠ”ë‹¤.\r\n     * 2. ë’¤ë¡œê°€ê¸° í´ë¦­ì‹œ ì´ì „ ì´ë ¥ì´ í˜„ì¬ ì£¼ì†Œì´ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì € í™”ë©´ì´ ë‹¤ì‹œ\r\n          ë¡œë“œë˜ì§€  ì•Šê³ , í˜„ì¬ í™”ë©´ì— ê·¸ëŒ€ë¡œ ìˆëŠ”ë‹¤.\r\n     * 3. windowì˜ history ê°ì²´ì— í˜„ì¬ ì£¼ì†Œë¡œëœ ì´ë ¥ì„ í•œ ë²ˆ ë” ë„£ëŠ”ë‹¤.\r\n     * 4. ì‚¬ìš©ìì˜ yes, no í´ë¦­ì„ ì´ìš©í•´ ë‹¤ìŒ í–‰ë™ì„ ê²°ì •ì§“ëŠ”ë‹¤.\r\n     * 4-1. yes í´ë¦­\r\n        í˜„ì¬ íˆìŠ¤í† ë¦¬ì—ëŠ” 3ë²ˆì—ì„œ ë„£ì€ ì´ë ¥ìœ¼ë¡œ ì¸í•´ 2ë²ˆ ë’¤ë¡œê°€ë„ë¡ í•œë‹¤.\r\n       4-2. no í´ë¦­\r\n        íˆìŠ¤í† ë¦¬ì— í˜„ì¬ ì£¼ì†Œ ì´ë ¥ì´ ìˆì–´ì•¼í•˜ê¸° ë•Œë¬¸ì— ì•„ë¬´ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.\r\n     */\r\n    const handlePopstate = () => {\r\n      if (isModified) {\r\n        history.pushState(null, '', location.href);\r\n        if (confirm('ë’¤ë¡œê°€ì‹œê² ìŠµë‹ˆê¹Œ? ì‘ì„±ëœ ë‚´ìš©ì€ ì €ì¥ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')) {\r\n          navigate(-2);\r\n        }\r\n      } else {\r\n        navigate(-1);\r\n      }\r\n    }\r\n\r\n    useEffect(() => {\r\n      // ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ë©´ ì´ë²¤íŠ¸ ìƒì„± ë° í˜„ì¬ ì£¼ì†Œ ì´ë ¥ ì¶”ê°€\r\n      window.addEventListener('beforeunload', handleBeforeunload);\r\n      history.pushState(null, '', location.href);\r\n      window.addEventListener('popstate', handlePopstate);\r\n\r\n      return () => {\r\n        // ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë˜ë©´ ì´ë²¤íŠ¸ë¥¼ ì œê±°í•œë‹¤.\r\n        window.removeEnventListener('beforeunload', handleBeforeunload);\r\n        window.removeEnventListener('popstate', handlePopstate);\r\n      }\r\n    }, [])\r\n   };\r\n   ```\r\n\r\n2. `useNavigate` í›… ì»¤ìŠ¤í…€\r\n\r\n`navigate('???')` ë°©ì‹ìœ¼ë¡œ ë¦¬ì•¡íŠ¸ì—ì„œ í˜ì´ì§€ ì´ë™ì„ ì‹œí‚¨ ê²½í—˜ì´ ìˆì„ ê²ƒ ì…ë‹ˆë‹¤. ìœ„ ì²˜ëŸ¼ í˜ì´ì§€ ì´ë™ì‹œì— ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•´ì„œ ë§‰ì„ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ? ë¼ëŠ” ìƒê°ì„ í–ˆìœ¼ë©´ ë°”ëŒì§í•œ ìƒê°ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ `navigate` í•¨ìˆ˜ê°€ ì‹¤í–‰ì´ ë˜ë©´, ì¤‘ê°„ì—ì„œ ì´ë²¤íŠ¸ë¡œ ë§‰ì„ìˆ˜ê°€ ì—†ê¸° ë•Œë¬¸ì— í›…ì„ ì»¤ìŠ¤í…€í•´ì„œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ì €ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í–ˆì§€ë§Œ ì ˆëŒ€ë¡œ ì •ë‹µì€ ì•„ë‹™ë‹ˆë‹¤.\r\n\r\n```javascript\r\n  const useCustomNavigate = () => {\r\n    const navigate = useNavigate();\r\n    const isModified =\r\n    /* ì´ê³³ì—ëŠ” isModifiedë¥¼ ì „ì—­ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì´ìš©í•œë‹¤.\r\n     * ìƒíƒœê°’ë³´ë‹¨ ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ì¼ìœ¼í‚¤ì§€ ì•ŠëŠ” useRef ê°ì²´ë¥¼ ì´ìš©ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.\r\n     */\r\n\r\n    const customNavigate = (to: To, options?: NavigateOptions, callback?: () => void) => {\r\n      if (isModified) {\r\n        if (confirm('ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì‘ì„±ëœ ë‚´ìš©ì€ ì €ì¥ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')) {\r\n          navigate(to, options);\r\n          isModified = false;\r\n          callback && callback();\r\n        } else {\r\n          navigate(to, options);\r\n          callback && callback();\r\n        }\r\n      }\r\n    }\r\n\r\n    return customNavigate;\r\n  }\r\n\r\n  export default useCustomNavigate();\r\n```\r\n\r\n3. ì‚¬ìš© ë°©ë²•\r\n\r\n   ```javascript\r\n    const BoardRegistPage = () => {\r\n      const navigate = useCustomNavigate();\r\n      const isModified =\r\n      /* ì´ê³³ì—ëŠ” isModifiedë¥¼ ì „ì—­ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì´ìš©í•œë‹¤.\r\n       * ìƒíƒœê°’ë³´ë‹¨ ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ì¼ìœ¼í‚¤ì§€ ì•ŠëŠ” useRef ê°ì²´ë¥¼ ì´ìš©ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.\r\n       */\r\n\r\n      // ìˆ˜ì •ì´ ë˜ì—ˆì„ ë•Œ ë¶€í„° ì´ë™ ê°ì§€ë¥¼ í•˜ê³ ì ì›í•œë‹¤ë©´ ì´ëŸ° ë°©ì‹ìœ¼ë¡œ,\r\n      // ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ ë˜ìë§ˆì ë§‰ê³  ì‹¶ë‹¤ë©´, useEffectë¥¼ ì´ìš©\r\n      const handleChange = () => {\r\n        isModified = true;\r\n        ...\r\n      }\r\n\r\n      // isModifiedê°€ trueë©´, navigate í•¨ìˆ˜ì—ì„œ ì´ë™ì„ ë§‰ëŠ” ë¡œì§ì´ ì‹¤í–‰ëœë‹¤.\r\n      const handleClick = () => {\r\n        navigate('/test');\r\n      }\r\n\r\n      return (\r\n        <>\r\n          {/* Link ì»´í¬ë„ŒíŠ¸ëŠ” toì— ì´ë™í•˜ì§€ ì•Šë„ë¡ #ì„ ë„£ì–´ì£¼ê³ , ì´ë™ ë°©ì‹ì€ onClickì„ ì´ìš©í•˜ì—¬ ì´ë™ì„ ë§‰ë„ë¡ í•œë‹¤.*/}\r\n          <Link\r\n            to=\"#\"\r\n            onClick={handleClick}\r\n          >ì´ë™</Link>\r\n\r\n          ...\r\n        </>\r\n      )\r\n    }\r\n   ```\r\n\r\n   4. ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•  ë³€ìˆ˜ `isModified`\r\n\r\n   `isModified` ëŠ” ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•  ë³€ìˆ˜ë¥¼ ì´ìš©í•œë‹¤.\r\n\r\n   1. ì»´í¬ë„ŒíŠ¸ ë°–ì—ì„œ ì„ ì–¸í•œ let ë³€ìˆ˜ (ê¶Œì¥ì•ˆí•¨)\r\n   2. ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ (zustand, Redux ë“±) (ìƒíƒœê°’ìœ¼ë¡œ ì„ ì–¸ì‹œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ìœ ë°œ)\r\n   3. `useRef` ê°ì²´ (ê¶Œì¥)\r\n\r\n   ìœ„ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ `Context` ì— `useRef` ê°ì²´ë¡œ ì„ ì–¸ëœ `isModified`ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•˜ì.\r\n\r\n   ì´ ê²½ìš° ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì„ ì•ˆí•˜ê¸° ë•Œë¬¸ì— í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ì–´ë””ì„œë“  ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\r\n"},{"excerpt":"ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´  í…œí”Œë¦¿ì„ ì´ìš©í•˜ëŠ” ì‚¬ëŒì˜ ê²½ìš°ê±°ë‚˜ ë¸”ë¡œê·¸ì— ëŒ“ê¸€ì„ ë¥¼ í†µí•´ ë§Œë“¤ê³  ì‹¶ì€ ê²½ìš° ì°¸ê³ ë§Œ í•˜ë©´ ëœë‹¤. ğŸ³ giscusê°€ ë¬´ì—‡ì¸ê°€? giscusëŠ” ì˜ ì„ í†µí•´ ëŒ“ê¸€ ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ì£¼ëŠ” í¸ë¦¬í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. ê°œë°œìëŠ” ì—ì„œ  ê¸°ëŠ¥ì„ ì—´ì–´ë‘ê³ , giscus í™ˆí˜ì´ì§€ì—ì„œ  ì£¼ì†Œì™€ ì—¬ëŸ¬ ì„¤ì •ì„ ì¶”ê°€í•˜ë©´ giscus ì •ë³´ë¥¼ ë°›ì„ ìˆ˜ â€¦","fields":{"slug":"/posts/how-to/giscus/"},"frontmatter":{"date":"March 13, 2025","title":"giscus ì‹œì‘í•˜ê¸°","tags":["gatsby"],"emoji":"âœ‹","series":"gatsby"},"rawMarkdownBody":"\r\n## ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½\r\n\r\nì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ `gatsby-starter-rundevelrun` í…œí”Œë¦¿ì„ ì´ìš©í•˜ëŠ” ì‚¬ëŒì˜ ê²½ìš°ê±°ë‚˜ ë¸”ë¡œê·¸ì— ëŒ“ê¸€ì„ `github`ë¥¼ í†µí•´ ë§Œë“¤ê³  ì‹¶ì€ ê²½ìš° ì°¸ê³ ë§Œ í•˜ë©´ ëœë‹¤.\r\n\r\n```shell\r\ngatsby new your-blog-name https://github.com/rundevelrun/gatsby-starter-rundevelrun.git\r\n```\r\n\r\n## ğŸ³ giscusê°€ ë¬´ì—‡ì¸ê°€?\r\n\r\ngiscusëŠ” `github repository`ì˜ `Discussion`ì„ í†µí•´ ëŒ“ê¸€ ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ì£¼ëŠ” í¸ë¦¬í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.\r\n\r\nê°œë°œìëŠ” `github repository`ì—ì„œ `Discussion` ê¸°ëŠ¥ì„ ì—´ì–´ë‘ê³ , giscus í™ˆí˜ì´ì§€ì—ì„œ `github repository` ì£¼ì†Œì™€ ì—¬ëŸ¬ ì„¤ì •ì„ ì¶”ê°€í•˜ë©´ giscus ì •ë³´ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n\r\n## â˜ giscus ì„¤ì • ë°©ë²•\r\n\r\n1. ëŒ“ê¸€ ë°ì´í„°ë¥¼ ë‹´ì•„ë‘˜ `repository`ì— ì ‘ì†í•œë‹¤.\r\n   - `public repository`ì¸ì§€ í™•ì¸í•œë‹¤.\r\n   - [giscus ì„¤ì¹˜ í˜ì´ì§€](https://github.com/apps/giscus) ì ‘ì†í•˜ì—¬ giscusë¥¼ ì„¤ì¹˜í•œë‹¤.\r\n   - `repository settings`ë¡œ ë“¤ì–´ê°€ì„œ `Features`ì— ìˆëŠ” `Discussions` ì²´í¬ë°•ìŠ¤ì— ì²´í¬í•œë‹¤.\r\n2. [giscus í™ˆí˜ì´ì§€](https://giscus.app/ko) ì ‘ì†í•˜ì—¬ ì„¤ì •í•œë‹¤.\r\n   - ì €ì¥ì†Œ ëª…ì„ ì…ë ¥í•œë‹¤.\r\n   - Discussions ì—°ê²° ë°©ë²•ì„ ì„ íƒí•œë‹¤.\r\n   - Discuussion ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•œë‹¤. (Announcementsë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.)\r\n   - ì›í•˜ëŠ” í…Œë§ˆì™€ ê¸°ëŠ¥ì„ ì„¤ì •í•˜ê³ , `giscus script`ë¥¼ ë³µì‚¬í•œë‹¤.\r\n   ```javascript\r\n   //ì˜ˆì‹œ\r\n   <script\r\n     src=\"https://giscus.app/client.js\"\r\n     data-repo=\"[ENTER REPO HERE]\"\r\n     data-repo-id=\"[ENTER REPO ID HERE]\"\r\n     data-category=\"[ENTER CATEGORY NAME HERE]\"\r\n     data-category-id=\"[ENTER CATEGORY ID HERE]\"\r\n     data-mapping=\"pathname\"\r\n     data-strict=\"0\"\r\n     data-reactions-enabled=\"1\"\r\n     data-emit-metadata=\"0\"\r\n     data-input-position=\"bottom\"\r\n     data-theme=\"preferred_color_scheme\"\r\n     data-lang=\"ko\"\r\n     crossorigin=\"anonymous\"\r\n     async\r\n   ></script>\r\n   ```\r\n\r\n## âœŒ ê°œì¸ ë¸”ë¡œê·¸ì—ì„œ giscus ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ê¸°\r\n\r\n1. giscus ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜\r\n\r\n   ```shell\r\n   npm i giscus\r\n   ```\r\n\r\n2. ì»´í¬ë„ŒíŠ¸ ìƒì„±\r\n\r\n   `giscus script`ì—ì„œ ë°›ì€ ë°ì´í„°ë¥¼ ì»´í¬ë„ŒíŠ¸ì— ë„£ì–´ì„œ ì‚¬ìš©í•˜ë©´ ì™„ì„±!\r\n\r\n   ```javascript\r\n   import Giscus from '@giscus/react';\r\n\r\n   export default function MyApp() {\r\n     return (\r\n       <Giscus\r\n         id=\"comments\"\r\n         repo=\"[ENTER REPO HERE]\"\r\n         repoId=\"[ENTER REPO ID HERE]\"\r\n         category=\"[ENTER CATEGORY NAME HERE]\"\r\n         categoryId=\"[ENTER CATEGORY ID HERE]\"\r\n         mapping=\"pathname\"\r\n         term=\"Welcome to @giscus/react component!\"\r\n         reactionsEnabled=\"1\"\r\n         emitMetadata=\"0\"\r\n         inputPosition=\"bottom\"\r\n         theme=\"light\"\r\n         lang=\"ko\"\r\n         loading=\"lazy\"\r\n       />\r\n     );\r\n   }\r\n   ```\r\n\r\n   > [giscus Github ì£¼ì†Œ](https://github.com/giscus/giscus-component) ì°¸ê³ í•˜ì˜€ìŠµë‹ˆë‹¤.\r\n\r\n## âœŒ rundevelrun/gatsby-starter-rundevelrun í…œí”Œë¦¿ ì „ìš© ì„¤ì •\r\n\r\n`blog-config.js`ì˜ ë‚´ìš© ìˆ˜ì •\r\n\r\n```javascript\r\nmodule.exports = {\r\n   ...\r\n   links: {\r\n      ...\r\n   },\r\n   giscus: {\r\n      repo=\"[ENTER REPO HERE]\"\r\n      repoId=\"[ENTER REPO ID HERE]\"\r\n      category=\"[ENTER CATEGORY NAME HERE]\"\r\n      categoryId=\"[ENTER CATEGORY ID HERE]\"\r\n      mapping=\"pathname\"\r\n      strict=\"0\"\r\n      reactionsEnabled: '1',\r\n      inputPosition=\"bottom\"\r\n      lang: 'ko',\r\n   },\r\n   adsense: {\r\n      ...\r\n   }\r\n}\r\n```\r\n\r\n## ğŸ‘ ëŒ“ê¸€ ì°½ í™•ì¸\r\n\r\n![giscus ëŒ“ê¸€ ìŠ¤í¬ë¦°ìƒ·](./../../../images/how-to/giscus-screenshot.png)\r\n"},{"excerpt":"ë¦¬ì•¡íŠ¸ í´ë”êµ¬ì¡° íšŒì‚¬ì—ì„œ ì²˜ìŒ ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ ê°€ì¥ ì´í•´ê°€ ì•ˆë˜ë˜ ë¶€ë¶„ì´ í´ë”êµ¬ì¡°ì˜€ë‹¤.\r\në‹¹ì‹œ  í´ë” ì•„ë˜ì—ëŠ” ë©”ë‰´ ë‹¨ìœ„ë¡œ ê°€ì ¸ê°”ê³ , ê³µí†µ ì»´í¬ë„ŒíŠ¸ëŠ”  ì•„ë˜ì— íŒŒì¼ ë‹¨ìœ„ë¡œë§Œ ë“¤ì–´ê°€ ìˆì—ˆë‹¤.\r\në˜í•œ ì™€ ì˜ ì°¨ì´ë¥¼ ëª°ëì—ˆë‹¤. ì¤‘ê°„ì— í”„ë¡œì íŠ¸ë¥¼ íˆ¬ì…í•˜ê²Œ ë˜ë©´ì„œ ë‚´ê°€ ë³´ëŠ” í˜ì´ì§€ê°€ ì–´ë–¤ íŒŒì¼ì¸ì§€ ìœ ì¶”ê°€ ì•ˆë˜ê³ , íŒŒì¼ì„ ì–´ë””ì— ë‘¬ì•¼í• ì§€ ê³ ë¯¼ì´ ë˜ì—ˆë‹¤.â€¦","fields":{"slug":"/posts/react/react-folder/"},"frontmatter":{"date":"March 11, 2025","title":"React Folder","tags":["react"],"emoji":"ğŸš€","series":"React"},"rawMarkdownBody":"\r\n# ë¦¬ì•¡íŠ¸ í´ë”êµ¬ì¡°\r\n\r\níšŒì‚¬ì—ì„œ ì²˜ìŒ ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ ê°€ì¥ ì´í•´ê°€ ì•ˆë˜ë˜ ë¶€ë¶„ì´ í´ë”êµ¬ì¡°ì˜€ë‹¤.\r\në‹¹ì‹œ `src` í´ë” ì•„ë˜ì—ëŠ” ë©”ë‰´ ë‹¨ìœ„ë¡œ ê°€ì ¸ê°”ê³ , ê³µí†µ ì»´í¬ë„ŒíŠ¸ëŠ” `components` ì•„ë˜ì— íŒŒì¼ ë‹¨ìœ„ë¡œë§Œ ë“¤ì–´ê°€ ìˆì—ˆë‹¤.\r\në˜í•œ `public/assets`ì™€ `src/assets`ì˜ ì°¨ì´ë¥¼ ëª°ëì—ˆë‹¤.\r\n\r\nì¤‘ê°„ì— í”„ë¡œì íŠ¸ë¥¼ íˆ¬ì…í•˜ê²Œ ë˜ë©´ì„œ ë‚´ê°€ ë³´ëŠ” í˜ì´ì§€ê°€ ì–´ë–¤ íŒŒì¼ì¸ì§€ ìœ ì¶”ê°€ ì•ˆë˜ê³ , íŒŒì¼ì„ ì–´ë””ì— ë‘¬ì•¼í• ì§€ ê³ ë¯¼ì´ ë˜ì—ˆë‹¤.\r\n\r\në‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ì–´ë–¤ í´ë”êµ¬ì¡°ë¥¼ ì“¸ê¹Œ? ì— ëŒ€í•œ ë‚´ìš©ê³¼ ë‚´ê°€ ì‚¬ìš©í•˜ëŠ” í´ë” êµ¬ì¡°ë¥¼ ì†Œê°œí•˜ë ¤ê³  í•œë‹¤.\r\n\r\n> ê¸°ë³¸ì ìœ¼ë¡œ í´ë”êµ¬ì¡°ëŠ” í”„ë¡œì íŠ¸ ìƒí™©ê³¼ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬, ë””ìì¸ íŒ¨í„´ì— ë§ê²Œ ìˆ˜ì •í•˜ëŠ”ê²Œ ë§ë‹¤ê³  ìƒê°í•œë‹¤.\r\n\r\n## create-react-app í´ë”êµ¬ì¡°\r\n\r\n```\r\nmy-app/\r\nâ”œâ”€â”€ node_modules/       # í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ëª¨ë“  ì˜ì¡´ì„±ì´ ì €ì¥ë˜ëŠ” í´ë”\r\nâ”œâ”€â”€ public/             # ì •ì  íŒŒì¼ì´ ì €ì¥ë˜ëŠ” í´ë”\r\nâ”‚   â”œâ”€â”€ favicon.ico     # ë¸Œë¼ìš°ì € íƒ­ì— í‘œì‹œë˜ëŠ” ì•„ì´ì½˜\r\nâ”‚   â”œâ”€â”€ index.html      # React ì•±ì´ ë¡œë“œë˜ëŠ” ê¸°ë³¸ HTML íŒŒì¼\r\nâ”‚   â”œâ”€â”€ logo192.png     # ê¸°ë³¸ ì œê³µ ë¡œê³  ì´ë¯¸ì§€ (192x192 í¬ê¸°)\r\nâ”‚   â”œâ”€â”€ logo512.png     # ê¸°ë³¸ ì œê³µ ë¡œê³  ì´ë¯¸ì§€ (512x512 í¬ê¸°)\r\nâ”‚   â”œâ”€â”€ manifest.json   # PWA ê´€ë ¨ ì„¤ì • íŒŒì¼\r\nâ”‚   â”œâ”€â”€ robots.txt      # ê²€ìƒ‰ ì—”ì§„ í¬ë¡¤ëŸ¬ ê´€ë ¨ ì„¤ì • íŒŒì¼\r\nâ”‚   â””â”€â”€ ...\r\nâ”œâ”€â”€ src/                # ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì£¼ìš” ì†ŒìŠ¤ ì½”ë“œê°€ ë“¤ì–´ê°€ëŠ” í´ë”\r\nâ”‚   â”œâ”€â”€ App.css         # `App` ì»´í¬ë„ŒíŠ¸ì˜ ìŠ¤íƒ€ì¼ ì •ì˜\r\nâ”‚   â”œâ”€â”€ App.js          # ì£¼ìš” ì• í”Œë¦¬ì¼€ì´ì…˜ ì»´í¬ë„ŒíŠ¸\r\nâ”‚   â”œâ”€â”€ App.test.js     # `App` ì»´í¬ë„ŒíŠ¸ì˜ í…ŒìŠ¤íŠ¸ íŒŒì¼\r\nâ”‚   â”œâ”€â”€ index.css       # ì „ì—­ ìŠ¤íƒ€ì¼ ì •ì˜\r\nâ”‚   â”œâ”€â”€ index.js        # ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì§„ì…ì  íŒŒì¼\r\nâ”‚   â”œâ”€â”€ logo.svg        # ê¸°ë³¸ ì œê³µ React ë¡œê³  (SVG í˜•ì‹)\r\nâ”‚   â”œâ”€â”€ reportWebVitals.js # ì„±ëŠ¥ ì¸¡ì • ê´€ë ¨ ì½”ë“œ\r\nâ”‚   â”œâ”€â”€ setupTests.js   # í…ŒìŠ¤íŠ¸ ì„¤ì • íŒŒì¼ (Jest)\r\nâ”‚   â””â”€â”€ ...\r\nâ”œâ”€â”€ .gitignore          # Gitì—ì„œ ë¬´ì‹œí•  íŒŒì¼ ëª©ë¡\r\nâ”œâ”€â”€ package.json        # í”„ë¡œì íŠ¸ ë° ì˜ì¡´ì„± ì„¤ì • íŒŒì¼\r\nâ”œâ”€â”€ README.md           # í”„ë¡œì íŠ¸ ì„¤ëª… íŒŒì¼\r\nâ”œâ”€â”€ yarn.lock / package-lock.json  # ì˜ì¡´ì„± ê³ ì • íŒŒì¼\r\nâ””â”€â”€ ...\r\n```\r\n\r\n- ë¦¬ì•¡íŠ¸ë¥¼ ì²˜ìŒ ì‹œì‘í•  ë•Œ ë°”ë¡œ ë³¼ ìˆ˜ ìˆëŠ” í´ë”êµ¬ì¡°ì´ë‹¤.\r\n  ë¦¬ì•¡íŠ¸ë¥¼ ì²˜ìŒ í•˜ëŠ” ì‚¬ëŒí•œí…ŒëŠ” src ë‚´ë¶€ êµ¬ì¡°ê°€ ì—†ì–´ í´ë”ë¥¼ ì–´ë–»ê²Œ ë§Œë“¤ì§€ ê³ ë¯¼ì´ ëœë‹¤.\r\n\r\n### src í´ë” êµ¬ì²´í™”\r\n\r\n```\r\nsrc/\r\nâ”œâ”€â”€ components/       # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸\r\nâ”œâ”€â”€ pages/            # ì£¼ìš” í˜ì´ì§€ êµ¬ì„± ìš”ì†Œ\r\nâ”œâ”€â”€ hooks/            # ì‚¬ìš©ì ì •ì˜ í›…\r\nâ”œâ”€â”€ services/         # API í˜¸ì¶œ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§\r\nâ”œâ”€â”€ types/            # íƒ€ì…\r\nâ”œâ”€â”€ utils/            # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\r\nâ”œâ”€â”€ context/          # React Context API ê´€ë ¨ ì½”ë“œ\r\nâ””â”€â”€ assets/           # ì´ë¯¸ì§€, í°íŠ¸, ì•„ì´ì½˜ ë“± ì •ì  ë¦¬ì†ŒìŠ¤\r\n```\r\n\r\n- Chat GPTëŠ” `src` êµ¬ì¡°ë¥¼ ìœ„ ì²˜ëŸ¼ í™•ì¥í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. í˜ì´ì§€ ë‹¨ìœ„ë¡œ íŒŒì¼ì„ ë§Œë“¤ê³ , ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ëŠ” ë”°ë¡œ ê´€ë¦¬í•˜ë©°\r\n  ì»¤ìŠ¤í…€ í›…ë„ ë”°ë¡œ ê´€ë¦¬í•œë‹¤. ì‹¤ì œë¡œ íŒŒì¼ë“¤ì„ ë„£ì–´ë³´ì\r\n\r\n```\r\nsrc/\r\nâ”œâ”€â”€ components/       # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸\r\nâ”‚\t\tâ””â”€â”€ board-header.tsx\r\nâ”œâ”€â”€ pages/            # ì£¼ìš” í˜ì´ì§€ êµ¬ì„± ìš”ì†Œ\r\nâ”‚       â””â”€â”€ board-page.tsx\r\nâ”œâ”€â”€ hooks/            # ì‚¬ìš©ì ì •ì˜ í›…\r\nâ”‚\t\tâ””â”€â”€ use-board.ts\r\nâ”œâ”€â”€ services/         # API í˜¸ì¶œ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§\r\nâ”‚\t\tâ””â”€â”€ board-api.ts\r\nâ”œâ”€â”€ types/            # íƒ€ì…\r\nâ”‚\t\tâ””â”€â”€ board.ts\r\nâ”œâ”€â”€ utils/            # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\r\nâ”‚\t\tâ””â”€â”€ date-util.ts\r\nâ”œâ”€â”€ context/          # React Context API ê´€ë ¨ ì½”ë“œ\r\nâ”œâ”€â”€ assets/           # ì´ë¯¸ì§€, í°íŠ¸, ì•„ì´ì½˜ ë“± ì •ì  ë¦¬ì†ŒìŠ¤\r\nâ”‚\t\tâ””â”€â”€ image1.png\r\n...\r\n```\r\n\r\n- ì²« í”„ë¡œì íŠ¸ ë•Œ ì´ëŸ¬í•œ êµ¬ì¡°ê°€ ë˜ì—ˆì—ˆë‹¤. ê²Œì‹œíŒì„ ìœ„ ì²˜ëŸ¼ ê°œë°œí–ˆì„ ë•Œ ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš°\r\n  ê´‘ë²”ìœ„í•˜ê²Œ í©ì–´ì§„ ì½”ë“œë¥¼ ì°¾ìœ¼ëŸ¬ ë‹¤ë…€ì•¼í•´ì„œ ë„ˆë¬´ í˜ë“¤ì—ˆë‹¤.\r\n\r\n> ê·¸ë˜ì„œ ìƒê°í•œ ê²ƒì€\r\n>\r\n> 1. URL ê²½ë¡œì™€ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ëŠ” ë³´í†µ 1 : 1 ì´ë‹ˆê¹Œ ê²½ë¡œì— ë§ê²Œ í´ë” êµ¬ì¡°ë¥¼ ë§Œë“¤ê¸°\r\n> 2. íŠ¹ì„±ì´ ê°™ê³ , ìˆ˜ì •ì‚¬í•­ì´ ë§ì€ íŒŒì¼ì˜ ê²½ìš°ëŠ” ê°™ì€ ê³³ì— ë„£ì–´ë‘ì\r\n\r\n## ë‚´ê°€ ì‚¬ìš©í•˜ë˜ í´ë” êµ¬ì¡°\r\n\r\n- ì•„ë˜ ì¡°ê±´ë“¤ì— ë§ì¶° `pages` í´ë”ë¥¼ ì¢€ë” êµ¬ì²´í™” í•˜ì˜€ë‹¤.\r\n  - í”„ë¡œì íŠ¸ ê·œëª¨ê°€ ì‘ë‹¤\r\n  - ë¼ìš°íŒ… ë˜ëŠ” URL ê²½ë¡œ êµ¬ì¡°ì™€ `pages` í´ë” êµ¬ì¡°ê°€ ê°™ë„ë¡ í•œë‹¤\r\n    - í´ë”ë¡œ ë¼ìš°íŒ… êµ¬ì¡° íŒŒì•… ê°€ëŠ¥\r\n  - ì¤‘ìš” ë¡œì§ì€ ì»¤ìŠ¤í…€ í›…ì—ì„œ ê´€ë¦¬í•œë‹¤\r\n    - UIì™€ ë¡œì§ ë¶„ë¦¬\r\n\r\n```\r\nsrc/\r\nâ”œâ”€â”€ components/                     # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸\r\nâ”œâ”€â”€ pages/                          # ì£¼ìš” í˜ì´ì§€ êµ¬ì„± ìš”ì†Œ\r\nâ”‚       â””â”€â”€ board/                  # URL ê²½ë¡œ\r\nâ”‚            â”œâ”€â”€ components/        # ì¢…ì†ëœ UI ì»´í¬ë„ŒíŠ¸\r\nâ”‚            â”‚    â”œâ”€â”€ hooks/        # ì¢…ì†ëœ ì»¤ìŠ¤í…€ í›…\r\nâ”‚\t\t         â”‚    â”‚    â””â”€â”€ use-board-header.ts\r\nâ”‚\t\t         â”‚    â”‚\r\nâ”‚\t\t         â”‚    â””â”€â”€ board-header.tsx\r\nâ”‚            â”œâ”€â”€ hooks/             # ì¢…ì†ëœ ì»¤ìŠ¤í…€ í›…\r\nâ”‚\t\t         â”‚    â””â”€â”€ use-board.ts\r\nâ”‚            â”œâ”€â”€ schema/            # hook-form ìŠ¤í‚¤ë§ˆ\r\nâ”‚\t\t         â”‚    â””â”€â”€ board-schema.ts\r\nâ”‚            â”œâ”€â”€ api/               # API í˜¸ì¶œ\r\nâ”‚\t\t         â”‚    â””â”€â”€ board-api.ts\r\nâ”‚            â”œâ”€â”€ models/            # íƒ€ì…\r\nâ”‚\t\t         â”‚    â””â”€â”€ board.ts\r\nâ”‚            â””â”€â”€ board-page.tsx\r\nâ”‚\r\nâ”œâ”€â”€ hooks/            # ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ì ì •ì˜ í›…\r\nâ”œâ”€â”€ apis/             # ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” API í˜¸ì¶œ\r\nâ”œâ”€â”€ models/           # ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” íƒ€ì…\r\nâ”œâ”€â”€ utils/            # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\r\nâ”œâ”€â”€ assets/           # ì´ë¯¸ì§€, í°íŠ¸, ì•„ì´ì½˜ ë“± ì •ì  ë¦¬ì†ŒìŠ¤\r\nâ”œâ”€â”€ routers/          # ë¼ìš°íŒ… ê´€ë ¨ ì»´í¬ë„ŒíŠ¸\r\nâ”œâ”€â”€ stores/           # ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒíƒœ\r\nâ”œâ”€â”€ App.tsx           # ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸\r\nâ””â”€â”€\r\n```\r\n\r\n`board` ê²½ë¡œì—ëŠ” ì´ì œ í•œ ê³³ì—ì„œ ì†ŒìŠ¤ë¥¼ í•œ ëˆˆì— í™•ì¸í•  ìˆ˜ ìˆê³ , ê´€ë¦¬ í¬ì¸íŠ¸ë„ ì¢ì•„ì¡Œë‹¤.\r\ní”„ë¡œì íŠ¸ë¥¼ í˜¼ìí•˜ëŠ” ê²ƒë„ ì•„ë‹ˆê³ , ìƒˆë¡œ ë“¤ì–´ì˜¤ëŠ” ê°œë°œìì—ê²Œ í´ë” êµ¬ì¡°ë¥¼ ëª‡ ì‹œê°„ë™ì•ˆ ê°•ì˜í•  ê²ƒì´ ì•„ë‹ˆë¼ë©´\r\nì´í•´ê°€ ê°€ëŠ” ì„ ì—ì„œ êµ¬ì¡°ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ë°©í–¥ì€ ì •ë§ ì¢‹ì€ ê²ƒ ê°™ë‹¤.\r\n\r\në˜í•œ ì»¤ìŠ¤í…€ í›… íŒ¨í„´ìœ¼ë¡œ í›…ì— ë¡œì§ì„ ëª¨ë‘ ë„£ì–´ë‘ê³  ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ì´ ìœ ì§€ë³´ìˆ˜ ë°©ë©´ì—ì„œ ì¢‹ë‹¤ê³  ëŠê¼ˆë‹¤.\r\nUI ì»´í¬ë„ŒíŠ¸ì—ì„œ UI ì†ŒìŠ¤ ë¶€ë¶„ì— ì„œë¹„ìŠ¤ ë¡œì§ì´ ë“¤ì–´ìˆëŠ” ê²½ìš° ì†ŒìŠ¤ ë³´ê¸°ê°€ ë¶ˆí¸í•œ ê²½ìš°ê°€ ë§ì•˜ë‹¤..\r\n\r\n## ìœ ëª…í•œ FSD\r\n\r\nìœ„ êµ¬ì¡°ë¥¼ ë³´ë©´ `ê²Œì‹œíŒ`ì´ë¼ëŠ” íŠ¹ì§•ì„ ê°€ì§„ ê¸°ëŠ¥ì„ `board` í´ë”ë¡œ ë¬¶ì€ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.\r\nê°™ì€ íŠ¹ì§•ì„ ê°€ì§„ ì†ŒìŠ¤ëŠ” í•œ ê³³ìœ¼ë¡œ ëª¨ì•„ë‘ì ë¼ëŠ” ëŠë‚Œìœ¼ë¡œ ë¬¶ì€ ê²ƒì¸ë°, `feature`ì™€ ê´€ë ¨ëœ ìœ ëª…í•œ ì•„í‚¤í…ì²˜ ë°©ë²•ë¡ ìœ¼ë¡œ `FSD`ê°€ ìˆë‹¤.\r\në¬¼ë¡  ë‚´ê°€ ì‚¬ìš©í•˜ë˜ í´ë” êµ¬ì¡°ì™€ëŠ” ë§ì´ ë‹¤ë¥´ê²Œ ìƒê²¼ë‹¤.\r\n`layer`ë¡œ ë‘¬ì„œ ê°™ì€ ì—„ê²©í•˜ê²Œ í´ë”ì— ë“¤ì–´ê°ˆ ì†ŒìŠ¤ ìœ„ì¹˜ë¥¼ êµ¬ë¶„í•˜ê³  `feature`ì—ì„œ ê¸°ëŠ¥ì„ ë¬¶ëŠ” ë°©ë²•ë¡ ì´ë‹¤.\r\n\r\n![FSD Scheme.png](FSD Scheme.png)\r\n\r\nìœ„ ì‚¬ì§„ë§Œìœ¼ë¡œ ì´í•´ê°€ ë˜ì§€ì•Šì§€ë§Œ, FSD í™ˆí˜ì´ì§€ë¥¼ ê°€ë³´ë©´, ì˜ˆì œì™€ ë§ˆì´ê·¸ë ˆì´ì…˜ ë°©ë²•ë„ ì¹œì ˆíˆ ë‚˜ì™€ìˆë‹¤.\r\n\r\n[FSD ë§ˆì´ê·¸ë ˆì´ì…˜ ë°©ë²•](https://feature-sliced.design/docs/guides/migration/from-v1) ê·¸ ì¤‘ì— `layer` ë‚´ìš©ë§Œ ê°€ì ¸ì™€ë³´ê² ë‹¤.\r\n\r\n- FSD Layer\r\n  - /app â€” application initialization layer\r\n    - Previous versions: app, core, init, src/index (and this happens)\r\n  - /processes â€” business process layer\r\n    - Previous versions: processes, flows, workflows\r\n  - /pages â€” application page layer\r\n    - Previous versions: pages, screens, views, layouts, components, containers\r\n  - /features â€” functionality parts layer\r\n    - Previous versions: features, components, containers\r\n  - /entities â€” business entity layer\r\n    - Previous versions: entities, models, shared\r\n  - /shared â€” layer of reused infrastructure code ğŸ”¥\r\n    - Previous versions: shared, common, lib\r\n\r\nì—¬ê¸°ì„œ í¬ê²Œ `app / pages / features` ë§Œ ë´ë„ ì¢‹ë‹¤.\r\n\r\n```\r\nsrc/\r\nâ”œâ”€â”€ app\r\nâ”‚       â”œâ”€â”€ layout/\r\nâ”‚       â”œâ”€â”€ providers/\r\nâ”‚       â”œâ”€â”€ routers/\r\nâ”‚       â””â”€â”€ App.tsx\r\nâ”œâ”€â”€ pages\r\nâ”‚       â””â”€â”€ board/\r\nâ”‚            â””â”€â”€ board-page.tsx\r\nâ”œâ”€â”€ features\r\nâ”‚       â””â”€â”€ board/\r\nâ”‚            â””â”€â”€ ui/\r\nâ”‚\t\t          â””â”€â”€ board-header.tsx\r\nâ”œâ”€â”€ entities\r\nâ”‚       â””â”€â”€ board/\r\nâ”‚\t\t     â””â”€â”€ types.ts\r\nâ”œâ”€â”€ shared\r\nâ”‚       â””â”€â”€ api/\r\nâ”‚            â””â”€â”€ board/\r\nâ”‚\t\t          â””â”€â”€ board-api.ts\r\nâ”‚       â””â”€â”€ assets/\r\nâ”‚       â””â”€â”€ lib/\r\nâ””â”€â”€\r\n```\r\n\r\ní¬ê²Œ ë‚´ìš©ì„ ë„£ì§„ ì•Šì•˜ì§€ë§Œ, `app` > `pages` > `features` > `entities` > `shared` í˜•ì‹ìœ¼ë¡œ ì¸µì„ ë‚˜ëˆ„ì–´ì„œ ìê¸°ë³´ë‹¤ ì•„ë˜ì— ìˆëŠ” ì¸µë§Œ\r\nì°¸ì¡°í•´ì„œ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ì´ë‹¤.\r\në³µì¡í•˜ì§€ë§Œ ìƒë‹¹íˆ í° í”„ë¡œì íŠ¸ì—ëŠ” ëª¨ë“  ê¸°ëŠ¥ì´ ë‚˜ëˆ ì ¸ìˆì–´ ê´€ë¦¬í•˜ëŠ” ë¶€ë¶„ì—ì„  ì¢‹ì„ ê²ƒì´ë‹¤.\r\n\r\n## MIT ë¦¬ì•¡íŠ¸ ì•„í‚¤í…ì²˜\r\n\r\n[MIT ë¦¬ì•¡íŠ¸ ì•„í‚¤í…ì²˜](https://github.com/alan2207/bulletproof-react/)\r\n\r\në¦¬ì•¡íŠ¸ ì•„í‚¤í…ì²˜ êµ¬ì¡°ë¥¼ ê°€ì´ë“œì²˜ëŸ¼ ë§Œë“¤ì–´ë‘” ë ˆí¬ê°€ ìˆë‹¤. `Star 29k` ê°€ ë„˜ì–´ê°„ ìœ ëª…í•œ ë ˆí¬ë©°, `feature`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í´ë”ë¥¼ ì„¤ê³„í•˜ì˜€ë‹¤.\r\n`nextjs ì•±`, `nextjs ì›¹`, `react-vite` ì„¸ê°œì˜ êµ¬ì¡°ë¥¼ ë³´ì—¬ì¤€ë‹¤.\r\n\r\n> bulletproof ëŠ” ì•ˆì •ì ì¸ ì½”ë“œë¥¼ ëœ»í•œë‹¤.\r\n\r\n```\r\nsrc/\r\nâ”œâ”€â”€ features\r\nâ”‚       â””â”€â”€ comments/\r\nâ”‚            â””â”€â”€ api/\r\nâ”‚\t\t         â””â”€â”€ components/\r\nâ””â”€â”€\r\n```\r\n\r\n`feature` í´ë” í•˜ë‚˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë³´ë©´, ë‚´ê°€ ì‚¬ìš©í•˜ëŠ” í´ë”êµ¬ì¡°ì™€ ë¹„ìŠ·í•˜ê²Œ í•œ ê³³ì—ì„œ ê´€ë ¨ëœ ì†ŒìŠ¤ë“¤ì„ ê´€ë¦¬í•œë‹¤.\r\ní•˜ì§€ë§Œ `FSD`ì™€ ë¹„ìŠ·í•˜ê²Œ `app` í´ë”ì—ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¡°ë¥¼ ë§Œë“ ë‹¤. `pages` í´ë” ì—†ì´ `app`í´ë”ì—ì„œ ëª¨ë‘ ê´€ë¦¬í•œë‹¤.\r\n\r\n```\r\nsrc/features/awesome-feature\r\n|\r\n+-- api         # exported API request declarations and api hooks related to a specific feature\r\n|\r\n+-- assets      # assets folder can contain all the static files for a specific feature\r\n|\r\n+-- components  # components scoped to a specific feature\r\n|\r\n+-- hooks       # hooks scoped to a specific feature\r\n|\r\n+-- stores      # state stores for a specific feature\r\n|\r\n+-- types       # typescript types used within the feature\r\n|\r\n+-- utils       # utility functions for a specific feature\r\n```\r\n\r\n## ì •ë¦¬\r\n\r\n`FSD`, `bulletproof-react repository`ë¥¼ êµ¬ê²½í•´ë´¤ë‹¤. `feature` í´ë”ì— ê¸°ëŠ¥ ê¸°ì¤€ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê³ , í•„ìš”í•œ `api` í˜¸ì¶œì´ë‚˜ ì¢…ì†ëœ ì»´í¬ë„ŒíŠ¸ì˜ ê²½ìš° ê°™ì€ ê³µê°„ì— ë§Œë“¤ì–´ ì†ŒìŠ¤ í™•ì¸í•  ë•Œ ì´ë¦¬ì €ë¦¬ ì›€ì§ì´ì§€ ì•Šê²Œ ë§Œë“œëŠ” ëª¨ìŠµì„ ë³´ì¸ë‹¤. `feature` ë°©ì‹ì„ ì´ìš©í•´ë³¼ê¹Œ ìƒê°ì¤‘ì´ë‹¤. ë¬¼ë¡  ë§ˆì´ê·¸ë ˆì´ì…˜ê¹Œì§€ í•˜ë©´ì„œ ì§„í–‰í•  ìƒê°ì€ ì—†ë‹¤.\r\n\r\ní”„ë¡œì íŠ¸ê°€ ì§„í–‰ë˜ë©´ì„œ ê³µí†µì ìœ¼ë¡œ ë§Œë“¤ì–´ì•¼í•˜ëŠ” ê¸°ëŠ¥ì´ ë§ì•„ì§€ëŠ” ê²½ìš° `src/component` í´ë”ê°€ ë§¤ìš° ì»¤ì¡Œë˜ ê²½í—˜ì´ ìˆë‹¤. ì¦ê²¨ì°¾ê¸°ê°€ ë˜ëŠ” ë²„íŠ¼í˜• ì•„ì´ì½˜ì„ ë§Œë“¤ ë•Œ ê¸°ëŠ¥ì— ì¹˜ì¤‘í•œ ì»´í¬ë„ŒíŠ¸ì´ë‹ˆê¹Œ `src/component/feature` í´ë”ë¥¼ ë§Œë“¤ê±°ë‚˜, `src/component/feature` í´ë”ë¥¼ ë§Œë“¤ì–´ì„œ í•œ ê³³ì— ë§Œë“¤ê³ , `src/component/ui` í´ë”ì—ëŠ” ê¸°ëŠ¥ì´ ì—†ëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” ì–´ë–¤ê°€ ì‹¶ê¸°ë„ í•˜ë‹¤.\r\n\r\n> ìš´ì˜í•˜ëŠ” ì‹œìŠ¤í…œì—ì„œ ì¡°ê¸ˆ ì‹ ê²½ì“°ì¼ì •ë„ë¡œ ëŠë¦° í™”ë©´ë“¤ì´ ìˆëŠ”ë°, `SSR`ì„ ì‚¬ìš©í•˜ë©´ ì¡°ê¸ˆ ë‚˜ì•„ì§ˆê¹Œ ì‹¶ì–´ Nextjsë¥¼ ê³µë¶€í•˜ê³ ìˆë‹¤.\r\n>\r\n> ì‚¬ìš©í•˜ë˜ í´ë”êµ¬ì¡°ë¥¼ ë³´ë‹ˆ Nextjsì˜ í˜ì´ì§€ ë¼ìš°íŒ… êµ¬ì¡°ì™€ ë¹„ìŠ·í•œ ëª¨ìŠµì„ ë³´ì—¬ ë†€ëë‹¤.\r\n"},{"excerpt":"ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½ NodeJS v22.13.0 \r\nyarn 1.22.22 ğŸ› ï¸ í™˜ê²½ ì„¤ì • NodeJSâ†— ì„¤ì¹˜ yarn ì„¤ì¹˜ gatsby-cli ì„¤ì¹˜ Gatsby ë¸”ë¡œê·¸ ìƒì„± ğŸš€ ê°œë°œ í™˜ê²½ êµ¬ë™ ì•„ë˜ ê³¼ì •ì„ ê±°ì¹œ í›„ ìœ¼ë¡œ ì ‘ì† ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜ êµ¬ë™ êµ¬ë™ ë°©ë²•ì€ ì‚¬ìš©í•˜ëŠ” Gatsby í…œí”Œë¦¿ë§ˆë‹¤  ì— ì‘ì„±ëœ yarn ëª…ë ¹ì–´ëŠ” ë‹¤ë¥´ê² ì§€ë§Œ, ëŒ€ë¶€ë¶„ ë™ì¼í•˜ê²Œ  ëª…ë ¹â€¦","fields":{"slug":"/posts/how-to/gatsby/"},"frontmatter":{"date":"January 18, 2025","title":"Gatsby ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸°","tags":["gatsby"],"emoji":"âœ‹","series":"gatsby"},"rawMarkdownBody":"\r\n## ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½\r\n\r\n> NodeJS v22.13.0 <br/>\r\n> yarn 1.22.22\r\n\r\n## ğŸ› ï¸ í™˜ê²½ ì„¤ì •\r\n\r\n1. [NodeJSâ†—](https://nodejs.org/ko/download) ì„¤ì¹˜\r\n2. yarn ì„¤ì¹˜\r\n   ```shell\r\n   npm install -g yarn\r\n   ```\r\n3. gatsby-cli ì„¤ì¹˜\r\n   ```shell\r\n   yarn global add gatsby-cli\r\n   ```\r\n4. Gatsby ë¸”ë¡œê·¸ ìƒì„±\r\n\r\n   ```shell\r\n   gatsby new [your-blog-name] [ì‚¬ìš©í•˜ê³  ì‹¶ì€ Gatsby í…œí”Œë¦¿]\r\n\r\n   ì˜ˆì‹œ : gatsby new your-blog-name https://github.com/rundevelrun/gatsby-starter-rundevelrun.git\r\n   ```\r\n\r\n## ğŸš€ ê°œë°œ í™˜ê²½ êµ¬ë™\r\n\r\nì•„ë˜ ê³¼ì •ì„ ê±°ì¹œ í›„ `http://localhost:8000`ìœ¼ë¡œ ì ‘ì†\r\n\r\n1. ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜\r\n\r\n   ```shell\r\n   cd your-blog-name\r\n   yarn install\r\n   ```\r\n\r\n2. êµ¬ë™\r\n\r\n   êµ¬ë™ ë°©ë²•ì€ ì‚¬ìš©í•˜ëŠ” Gatsby í…œí”Œë¦¿ë§ˆë‹¤ `package.json` ì— ì‘ì„±ëœ yarn ëª…ë ¹ì–´ëŠ” ë‹¤ë¥´ê² ì§€ë§Œ, ëŒ€ë¶€ë¶„ ë™ì¼í•˜ê²Œ `gatsby develop` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.\r\n\r\n   **ì´í›„ ë‚´ìš©ë¶€í„°ëŠ” `https://github.com/rundevelrun/gatsby-starter-rundevelrun.git` í…œí”Œë¦¿ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…ì„œê°€ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.**\r\n\r\n   ```shell\r\n   yarn develop\r\n   ```\r\n\r\n## â˜ºï¸ ì‚¬ìš©ìí™”\r\n\r\n`blog-config.js`ì˜ ë‚´ìš© ìˆ˜ì •\r\n\r\n```javascript\r\nmodule.exports = {\r\n  title: \"YOUR:BLOG:NAME\",    // SEO Blog title\r\n  headerTitle: \"YOUR:<em style='color:#ed6c02'>BLOG</em>:NAME\", // Logo 1\r\n  headerSubTitle: \"<em style='color:#ed6c02'>YOUR</em>:BLOG:<em style='color:#ed6c02'>NAME</em>\", // Logo 2\r\n  copyright: \"Â©YOUR:BLOG:NAME\", // copyright in footer\r\n  author: \"YOUR:NAME\",  // Your Name\r\n  siteUrl: \"https://6developer.com/\", // Your Site URL\r\n  description: \"Hi, Nice to meet you !\",  // Blog description\r\n  links: {\r\n    github: \"https://github.com/rundevelrun\",\r\n    ...\r\n  },\r\n  giscus: {\r\n    ...\r\n  },\r\n  adsense: {\r\n    ...\r\n  }\r\n}\r\n```\r\n\r\n## ğŸ“ ê²Œì‹œê¸€ ì‘ì„±\r\n\r\n1. `contents/posts` í´ë”ì— ê²Œì‹œê¸€ íŒŒì¼ ìƒì„± (ë‘ê°€ì§€ ë°©ë²•)\r\n   1. pathnameìœ¼ë¡œ ì‚¬ìš©í•  ì´ë¦„ì˜ í´ë”ë¥¼ ë§Œë“¤ê³  í•˜ìœ„ì— 'index.md'ë¥¼ ìƒì„±\r\n   2. pathnameìœ¼ë¡œ ì‚¬ìš©í•  ì´ë¦„ìœ¼ë¡œ `*.md` íŒŒì¼ ìƒì„±\r\n2. frontmatter ì‘ì„±\r\n   ```yaml\r\n   ---\r\n   emoji: 'ğŸš€'\r\n   title: 'ì–´ë–»ê²Œ ì‹œì‘í• ê¹Œìš”?'\r\n   date: 2025-01-19 13:53:00\r\n   update: 2025-01-19 13:53:00\r\n   tags:\r\n     - rundevelrun\r\n     - howto\r\n   series: 'Gatsby ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸°'\r\n   ---\r\n   ```\r\n"}]}},"pageContext":{}},"staticQueryHashes":[],"slicesMap":{}}